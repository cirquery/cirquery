var Pa=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cg=Pa((q,Y)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ns=typeof global=="object"&&global&&global.Object===Object&&global,ka=typeof self=="object"&&self&&self.Object===Object&&self,Re=ns||ka||Function("return this")(),ne=Re.Symbol,rs=Object.prototype,ba=rs.hasOwnProperty,wa=rs.toString,ft=ne?ne.toStringTag:void 0;function Ma(t){var e=ba.call(t,ft),n=t[ft];try{t[ft]=void 0;var r=!0}catch{}var i=wa.call(t);return r&&(e?t[ft]=n:delete t[ft]),i}var Ua=Object.prototype,Fa=Ua.toString;function $a(t){return Fa.call(t)}var Da="[object Null]",Ba="[object Undefined]",qr=ne?ne.toStringTag:void 0;function Be(t){return t==null?t===void 0?Ba:Da:qr&&qr in Object(t)?Ma(t):$a(t)}function de(t){return t!=null&&typeof t=="object"}var Ga="[object Symbol]";function gn(t){return typeof t=="symbol"||de(t)&&Be(t)==Ga}function mn(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var L=Array.isArray,Yr=ne?ne.prototype:void 0,Xr=Yr?Yr.toString:void 0;function is(t){if(typeof t=="string")return t;if(L(t))return mn(t,is)+"";if(gn(t))return Xr?Xr.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Wa=/\s/;function Ka(t){for(var e=t.length;e--&&Wa.test(t.charAt(e)););return e}var za=/^\s+/;function ja(t){return t&&t.slice(0,Ka(t)+1).replace(za,"")}function re(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Qr=NaN,Ha=/^[-+]0x[0-9a-f]+$/i,Va=/^0b[01]+$/i,qa=/^0o[0-7]+$/i,Ya=parseInt;function Xa(t){if(typeof t=="number")return t;if(gn(t))return Qr;if(re(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=re(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ja(t);var n=Va.test(t);return n||qa.test(t)?Ya(t.slice(2),n?2:8):Ha.test(t)?Qr:+t}var Zr=1/0,Qa=17976931348623157e292;function Za(t){if(!t)return t===0?t:0;if(t=Xa(t),t===Zr||t===-Zr){var e=t<0?-1:1;return e*Qa}return t===t?t:0}function En(t){var e=Za(t),n=e%1;return e===e?n?e-n:e:0}function nt(t){return t}var Ja="[object AsyncFunction]",eo="[object Function]",to="[object GeneratorFunction]",no="[object Proxy]";function Pe(t){if(!re(t))return!1;var e=Be(t);return e==eo||e==to||e==Ja||e==no}var Un=Re["__core-js_shared__"],Jr=function(){var t=/[^.]+$/.exec(Un&&Un.keys&&Un.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ro(t){return!!Jr&&Jr in t}var io=Function.prototype,so=io.toString;function Ye(t){if(t!=null){try{return so.call(t)}catch{}try{return t+""}catch{}}return""}var ao=/[\\^$.*+?()[\]{}|]/g,oo=/^\[object .+?Constructor\]$/,co=Function.prototype,lo=Object.prototype,uo=co.toString,ho=lo.hasOwnProperty,fo=RegExp("^"+uo.call(ho).replace(ao,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function po(t){if(!re(t)||ro(t))return!1;var e=Pe(t)?fo:oo;return e.test(Ye(t))}function go(t,e){return t?.[e]}function Xe(t,e){var n=go(t,e);return po(n)?n:void 0}var jn=Xe(Re,"WeakMap"),ei=Object.create,mo=function(){function t(){}return function(e){if(!re(e))return{};if(ei)return ei(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Eo(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function w(){}function To(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Ao=800,Ro=16,So=Date.now;function Io(t){var e=0,n=0;return function(){var r=So(),i=Ro-(r-n);if(n=r,i>0){if(++e>=Ao)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function No(t){return function(){return t}}var rn=function(){try{var t=Xe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),yo=rn?function(t,e){return rn(t,"toString",{configurable:!0,enumerable:!1,value:No(e),writable:!0})}:nt,Oo=Io(yo);function ss(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function as(t,e,n,r){for(var i=t.length,s=n+-1;++s<i;)if(e(t[s],s,t))return s;return-1}function Lo(t){return t!==t}function _o(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function fr(t,e,n){return e===e?_o(t,e,n):as(t,Lo,n)}function os(t,e){var n=t==null?0:t.length;return!!n&&fr(t,e,0)>-1}var vo=9007199254740991,Co=/^(?:0|[1-9]\d*)$/;function Tn(t,e){var n=typeof t;return e=e??vo,!!e&&(n=="number"||n!="symbol"&&Co.test(t))&&t>-1&&t%1==0&&t<e}function dr(t,e,n){e=="__proto__"&&rn?rn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Lt(t,e){return t===e||t!==t&&e!==e}var xo=Object.prototype,Po=xo.hasOwnProperty;function An(t,e,n){var r=t[e];(!(Po.call(t,e)&&Lt(r,n))||n===void 0&&!(e in t))&&dr(t,e,n)}function pr(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],c=void 0;c===void 0&&(c=t[o]),i?dr(n,o,c):An(n,o,c)}return n}var ti=Math.max;function ko(t,e,n){return e=ti(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=ti(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),Eo(t,this,o)}}function gr(t,e){return Oo(ko(t,e,nt),t+"")}var bo=9007199254740991;function mr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bo}function Se(t){return t!=null&&mr(t.length)&&!Pe(t)}function cs(t,e,n){if(!re(n))return!1;var r=typeof e;return(r=="number"?Se(n)&&Tn(e,n.length):r=="string"&&e in n)?Lt(n[e],t):!1}function wo(t){return gr(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&cs(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var Mo=Object.prototype;function _t(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Mo;return t===n}function Uo(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Fo="[object Arguments]";function ni(t){return de(t)&&Be(t)==Fo}var ls=Object.prototype,$o=ls.hasOwnProperty,Do=ls.propertyIsEnumerable,Rn=ni(function(){return arguments}())?ni:function(t){return de(t)&&$o.call(t,"callee")&&!Do.call(t,"callee")};function Bo(){return!1}var us=typeof q=="object"&&q&&!q.nodeType&&q,ri=us&&typeof Y=="object"&&Y&&!Y.nodeType&&Y,Go=ri&&ri.exports===us,ii=Go?Re.Buffer:void 0,Wo=ii?ii.isBuffer:void 0,St=Wo||Bo,Ko="[object Arguments]",zo="[object Array]",jo="[object Boolean]",Ho="[object Date]",Vo="[object Error]",qo="[object Function]",Yo="[object Map]",Xo="[object Number]",Qo="[object Object]",Zo="[object RegExp]",Jo="[object Set]",ec="[object String]",tc="[object WeakMap]",nc="[object ArrayBuffer]",rc="[object DataView]",ic="[object Float32Array]",sc="[object Float64Array]",ac="[object Int8Array]",oc="[object Int16Array]",cc="[object Int32Array]",lc="[object Uint8Array]",uc="[object Uint8ClampedArray]",hc="[object Uint16Array]",fc="[object Uint32Array]",x={};x[ic]=x[sc]=x[ac]=x[oc]=x[cc]=x[lc]=x[uc]=x[hc]=x[fc]=!0;x[Ko]=x[zo]=x[nc]=x[jo]=x[rc]=x[Ho]=x[Vo]=x[qo]=x[Yo]=x[Xo]=x[Qo]=x[Zo]=x[Jo]=x[ec]=x[tc]=!1;function dc(t){return de(t)&&mr(t.length)&&!!x[Be(t)]}function Sn(t){return function(e){return t(e)}}var hs=typeof q=="object"&&q&&!q.nodeType&&q,Tt=hs&&typeof Y=="object"&&Y&&!Y.nodeType&&Y,pc=Tt&&Tt.exports===hs,Fn=pc&&ns.process,$e=function(){try{var t=Tt&&Tt.require&&Tt.require("util").types;return t||Fn&&Fn.binding&&Fn.binding("util")}catch{}}(),si=$e&&$e.isTypedArray,Er=si?Sn(si):dc,gc=Object.prototype,mc=gc.hasOwnProperty;function fs(t,e){var n=L(t),r=!n&&Rn(t),i=!n&&!r&&St(t),s=!n&&!r&&!i&&Er(t),a=n||r||i||s,o=a?Uo(t.length,String):[],c=o.length;for(var l in t)(e||mc.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Tn(l,c)))&&o.push(l);return o}function ds(t,e){return function(n){return t(e(n))}}var Ec=ds(Object.keys,Object),Tc=Object.prototype,Ac=Tc.hasOwnProperty;function ps(t){if(!_t(t))return Ec(t);var e=[];for(var n in Object(t))Ac.call(t,n)&&n!="constructor"&&e.push(n);return e}function ie(t){return Se(t)?fs(t):ps(t)}var Rc=Object.prototype,Sc=Rc.hasOwnProperty,X=wo(function(t,e){if(_t(e)||Se(e)){pr(e,ie(e),t);return}for(var n in e)Sc.call(e,n)&&An(t,n,e[n])});function Ic(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Nc=Object.prototype,yc=Nc.hasOwnProperty;function Oc(t){if(!re(t))return Ic(t);var e=_t(t),n=[];for(var r in t)r=="constructor"&&(e||!yc.call(t,r))||n.push(r);return n}function gs(t){return Se(t)?fs(t,!0):Oc(t)}var Lc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_c=/^\w*$/;function Tr(t,e){if(L(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||gn(t)?!0:_c.test(t)||!Lc.test(t)||e!=null&&t in Object(e)}var It=Xe(Object,"create");function vc(){this.__data__=It?It(null):{},this.size=0}function Cc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var xc="__lodash_hash_undefined__",Pc=Object.prototype,kc=Pc.hasOwnProperty;function bc(t){var e=this.__data__;if(It){var n=e[t];return n===xc?void 0:n}return kc.call(e,t)?e[t]:void 0}var wc=Object.prototype,Mc=wc.hasOwnProperty;function Uc(t){var e=this.__data__;return It?e[t]!==void 0:Mc.call(e,t)}var Fc="__lodash_hash_undefined__";function $c(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=It&&e===void 0?Fc:e,this}function He(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}He.prototype.clear=vc;He.prototype.delete=Cc;He.prototype.get=bc;He.prototype.has=Uc;He.prototype.set=$c;function Dc(){this.__data__=[],this.size=0}function In(t,e){for(var n=t.length;n--;)if(Lt(t[n][0],e))return n;return-1}var Bc=Array.prototype,Gc=Bc.splice;function Wc(t){var e=this.__data__,n=In(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Gc.call(e,n,1),--this.size,!0}function Kc(t){var e=this.__data__,n=In(e,t);return n<0?void 0:e[n][1]}function zc(t){return In(this.__data__,t)>-1}function jc(t,e){var n=this.__data__,r=In(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ke(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ke.prototype.clear=Dc;ke.prototype.delete=Wc;ke.prototype.get=Kc;ke.prototype.has=zc;ke.prototype.set=jc;var Nt=Xe(Re,"Map");function Hc(){this.size=0,this.__data__={hash:new He,map:new(Nt||ke),string:new He}}function Vc(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Nn(t,e){var n=t.__data__;return Vc(e)?n[typeof e=="string"?"string":"hash"]:n.map}function qc(t){var e=Nn(this,t).delete(t);return this.size-=e?1:0,e}function Yc(t){return Nn(this,t).get(t)}function Xc(t){return Nn(this,t).has(t)}function Qc(t,e){var n=Nn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function be(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}be.prototype.clear=Hc;be.prototype.delete=qc;be.prototype.get=Yc;be.prototype.has=Xc;be.prototype.set=Qc;var Zc="Expected a function";function Ar(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Zc);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Ar.Cache||be),n}Ar.Cache=be;var Jc=500;function el(t){var e=Ar(t,function(r){return n.size===Jc&&n.clear(),r}),n=e.cache;return e}var tl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nl=/\\(\\)?/g,rl=el(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(tl,function(n,r,i,s){e.push(i?s.replace(nl,"$1"):r||n)}),e});function il(t){return t==null?"":is(t)}function yn(t,e){return L(t)?t:Tr(t,e)?[t]:rl(il(t))}function vt(t){if(typeof t=="string"||gn(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Rr(t,e){e=yn(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[vt(e[n++])];return n&&n==r?t:void 0}function sl(t,e,n){var r=t==null?void 0:Rr(t,e);return r===void 0?n:r}function Sr(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var ai=ne?ne.isConcatSpreadable:void 0;function al(t){return L(t)||Rn(t)||!!(ai&&t&&t[ai])}function Ir(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=al),i||(i=[]);++s<a;){var o=t[s];n(o)?Sr(i,o):r||(i[i.length]=o)}return i}function he(t){var e=t==null?0:t.length;return e?Ir(t):[]}var ms=ds(Object.getPrototypeOf,Object);function Es(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function ol(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function cl(){this.__data__=new ke,this.size=0}function ll(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function ul(t){return this.__data__.get(t)}function hl(t){return this.__data__.has(t)}var fl=200;function dl(t,e){var n=this.__data__;if(n instanceof ke){var r=n.__data__;if(!Nt||r.length<fl-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new be(r)}return n.set(t,e),this.size=n.size,this}function Ae(t){var e=this.__data__=new ke(t);this.size=e.size}Ae.prototype.clear=cl;Ae.prototype.delete=ll;Ae.prototype.get=ul;Ae.prototype.has=hl;Ae.prototype.set=dl;function pl(t,e){return t&&pr(e,ie(e),t)}var Ts=typeof q=="object"&&q&&!q.nodeType&&q,oi=Ts&&typeof Y=="object"&&Y&&!Y.nodeType&&Y,gl=oi&&oi.exports===Ts,ci=gl?Re.Buffer:void 0,li=ci?ci.allocUnsafe:void 0;function ml(t,e){var n=t.length,r=li?li(n):new t.constructor(n);return t.copy(r),r}function Nr(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}function As(){return[]}var El=Object.prototype,Tl=El.propertyIsEnumerable,ui=Object.getOwnPropertySymbols,yr=ui?function(t){return t==null?[]:(t=Object(t),Nr(ui(t),function(e){return Tl.call(t,e)}))}:As;function Al(t,e){return pr(t,yr(t),e)}var Rl=Object.getOwnPropertySymbols,Sl=Rl?function(t){for(var e=[];t;)Sr(e,yr(t)),t=ms(t);return e}:As;function Rs(t,e,n){var r=e(t);return L(t)?r:Sr(r,n(t))}function Hn(t){return Rs(t,ie,yr)}function Il(t){return Rs(t,gs,Sl)}var Vn=Xe(Re,"DataView"),qn=Xe(Re,"Promise"),tt=Xe(Re,"Set"),hi="[object Map]",Nl="[object Object]",fi="[object Promise]",di="[object Set]",pi="[object WeakMap]",gi="[object DataView]",yl=Ye(Vn),Ol=Ye(Nt),Ll=Ye(qn),_l=Ye(tt),vl=Ye(jn),ee=Be;(Vn&&ee(new Vn(new ArrayBuffer(1)))!=gi||Nt&&ee(new Nt)!=hi||qn&&ee(qn.resolve())!=fi||tt&&ee(new tt)!=di||jn&&ee(new jn)!=pi)&&(ee=function(t){var e=Be(t),n=e==Nl?t.constructor:void 0,r=n?Ye(n):"";if(r)switch(r){case yl:return gi;case Ol:return hi;case Ll:return fi;case _l:return di;case vl:return pi}return e});var Cl=Object.prototype,xl=Cl.hasOwnProperty;function Pl(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&xl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var sn=Re.Uint8Array;function kl(t){var e=new t.constructor(t.byteLength);return new sn(e).set(new sn(t)),e}function bl(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var wl=/\w*$/;function Ml(t){var e=new t.constructor(t.source,wl.exec(t));return e.lastIndex=t.lastIndex,e}var mi=ne?ne.prototype:void 0,Ei=mi?mi.valueOf:void 0;function Ul(t){return Ei?Object(Ei.call(t)):{}}function Fl(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var $l="[object Boolean]",Dl="[object Date]",Bl="[object Map]",Gl="[object Number]",Wl="[object RegExp]",Kl="[object Set]",zl="[object String]",jl="[object Symbol]",Hl="[object ArrayBuffer]",Vl="[object DataView]",ql="[object Float32Array]",Yl="[object Float64Array]",Xl="[object Int8Array]",Ql="[object Int16Array]",Zl="[object Int32Array]",Jl="[object Uint8Array]",eu="[object Uint8ClampedArray]",tu="[object Uint16Array]",nu="[object Uint32Array]";function ru(t,e,n){var r=t.constructor;switch(e){case Hl:return kl(t);case $l:case Dl:return new r(+t);case Vl:return bl(t);case ql:case Yl:case Xl:case Ql:case Zl:case Jl:case eu:case tu:case nu:return Fl(t);case Bl:return new r;case Gl:case zl:return new r(t);case Wl:return Ml(t);case Kl:return new r;case jl:return Ul(t)}}function iu(t){return typeof t.constructor=="function"&&!_t(t)?mo(ms(t)):{}}var su="[object Map]";function au(t){return de(t)&&ee(t)==su}var Ti=$e&&$e.isMap,ou=Ti?Sn(Ti):au,cu="[object Set]";function lu(t){return de(t)&&ee(t)==cu}var Ai=$e&&$e.isSet,uu=Ai?Sn(Ai):lu,Ss="[object Arguments]",hu="[object Array]",fu="[object Boolean]",du="[object Date]",pu="[object Error]",Is="[object Function]",gu="[object GeneratorFunction]",mu="[object Map]",Eu="[object Number]",Ns="[object Object]",Tu="[object RegExp]",Au="[object Set]",Ru="[object String]",Su="[object Symbol]",Iu="[object WeakMap]",Nu="[object ArrayBuffer]",yu="[object DataView]",Ou="[object Float32Array]",Lu="[object Float64Array]",_u="[object Int8Array]",vu="[object Int16Array]",Cu="[object Int32Array]",xu="[object Uint8Array]",Pu="[object Uint8ClampedArray]",ku="[object Uint16Array]",bu="[object Uint32Array]",v={};v[Ss]=v[hu]=v[Nu]=v[yu]=v[fu]=v[du]=v[Ou]=v[Lu]=v[_u]=v[vu]=v[Cu]=v[mu]=v[Eu]=v[Ns]=v[Tu]=v[Au]=v[Ru]=v[Su]=v[xu]=v[Pu]=v[ku]=v[bu]=!0;v[pu]=v[Is]=v[Iu]=!1;function zt(t,e,n,r,i,s){var a;if(a!==void 0)return a;if(!re(t))return t;var o=L(t);if(o)return a=Pl(t),To(t,a);var c=ee(t),l=c==Is||c==gu;if(St(t))return ml(t);if(c==Ns||c==Ss||l&&!i)return a=l?{}:iu(t),Al(t,pl(a,t));if(!v[c])return i?t:{};a=ru(t,c),s||(s=new Ae);var h=s.get(t);if(h)return h;s.set(t,a),uu(t)?t.forEach(function(d){a.add(zt(d,e,n,d,t,s))}):ou(t)&&t.forEach(function(d,g){a.set(g,zt(d,e,n,g,t,s))});var u=Hn,f=o?void 0:u(t);return ss(f||t,function(d,g){f&&(g=d,d=t[g]),An(a,g,zt(d,e,n,g,t,s))}),a}var wu=4;function D(t){return zt(t,wu)}function Ct(t){for(var e=-1,n=t==null?0:t.length,r=0,i=[];++e<n;){var s=t[e];s&&(i[r++]=s)}return i}var Mu="__lodash_hash_undefined__";function Uu(t){return this.__data__.set(t,Mu),this}function Fu(t){return this.__data__.has(t)}function rt(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new be;++e<n;)this.add(t[e])}rt.prototype.add=rt.prototype.push=Uu;rt.prototype.has=Fu;function ys(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Or(t,e){return t.has(e)}var $u=1,Du=2;function Os(t,e,n,r,i,s){var a=n&$u,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var u=-1,f=!0,d=n&Du?new rt:void 0;for(s.set(t,e),s.set(e,t);++u<o;){var g=t[u],R=e[u];if(r)var y=a?r(R,g,u,e,t,s):r(g,R,u,t,e,s);if(y!==void 0){if(y)continue;f=!1;break}if(d){if(!ys(e,function(E,m){if(!Or(d,m)&&(g===E||i(g,E,n,r,s)))return d.push(m)})){f=!1;break}}else if(!(g===R||i(g,R,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}function Bu(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Lr(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Gu=1,Wu=2,Ku="[object Boolean]",zu="[object Date]",ju="[object Error]",Hu="[object Map]",Vu="[object Number]",qu="[object RegExp]",Yu="[object Set]",Xu="[object String]",Qu="[object Symbol]",Zu="[object ArrayBuffer]",Ju="[object DataView]",Ri=ne?ne.prototype:void 0,$n=Ri?Ri.valueOf:void 0;function eh(t,e,n,r,i,s,a){switch(n){case Ju:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Zu:return!(t.byteLength!=e.byteLength||!s(new sn(t),new sn(e)));case Ku:case zu:case Vu:return Lt(+t,+e);case ju:return t.name==e.name&&t.message==e.message;case qu:case Xu:return t==e+"";case Hu:var o=Bu;case Yu:var c=r&Gu;if(o||(o=Lr),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=Wu,a.set(t,e);var h=Os(o(t),o(e),r,i,s,a);return a.delete(t),h;case Qu:if($n)return $n.call(t)==$n.call(e)}return!1}var th=1,nh=Object.prototype,rh=nh.hasOwnProperty;function ih(t,e,n,r,i,s){var a=n&th,o=Hn(t),c=o.length,l=Hn(e),h=l.length;if(c!=h&&!a)return!1;for(var u=c;u--;){var f=o[u];if(!(a?f in e:rh.call(e,f)))return!1}var d=s.get(t),g=s.get(e);if(d&&g)return d==e&&g==t;var R=!0;s.set(t,e),s.set(e,t);for(var y=a;++u<c;){f=o[u];var E=t[f],m=e[f];if(r)var p=a?r(m,E,f,e,t,s):r(E,m,f,t,e,s);if(!(p===void 0?E===m||i(E,m,n,r,s):p)){R=!1;break}y||(y=f=="constructor")}if(R&&!y){var T=t.constructor,_=e.constructor;T!=_&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof _=="function"&&_ instanceof _)&&(R=!1)}return s.delete(t),s.delete(e),R}var sh=1,Si="[object Arguments]",Ii="[object Array]",$t="[object Object]",ah=Object.prototype,Ni=ah.hasOwnProperty;function oh(t,e,n,r,i,s){var a=L(t),o=L(e),c=a?Ii:ee(t),l=o?Ii:ee(e);c=c==Si?$t:c,l=l==Si?$t:l;var h=c==$t,u=l==$t,f=c==l;if(f&&St(t)){if(!St(e))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new Ae),a||Er(t)?Os(t,e,n,r,i,s):eh(t,e,c,n,r,i,s);if(!(n&sh)){var d=h&&Ni.call(t,"__wrapped__"),g=u&&Ni.call(e,"__wrapped__");if(d||g){var R=d?t.value():t,y=g?e.value():e;return s||(s=new Ae),i(R,y,n,r,s)}}return f?(s||(s=new Ae),ih(t,e,n,r,i,s)):!1}function _r(t,e,n,r,i){return t===e?!0:t==null||e==null||!de(t)&&!de(e)?t!==t&&e!==e:oh(t,e,n,r,_r,i)}var ch=1,lh=2;function uh(t,e,n,r){var i=n.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var o=a[0],c=t[o],l=a[1];if(a[2]){if(c===void 0&&!(o in t))return!1}else{var h=new Ae,u;if(!(u===void 0?_r(l,c,ch|lh,r,h):u))return!1}}return!0}function Ls(t){return t===t&&!re(t)}function hh(t){for(var e=ie(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ls(i)]}return e}function _s(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function fh(t){var e=hh(t);return e.length==1&&e[0][2]?_s(e[0][0],e[0][1]):function(n){return n===t||uh(n,t,e)}}function dh(t,e){return t!=null&&e in Object(t)}function vs(t,e,n){e=yn(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=vt(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&mr(i)&&Tn(a,i)&&(L(t)||Rn(t)))}function ph(t,e){return t!=null&&vs(t,e,dh)}var gh=1,mh=2;function Eh(t,e){return Tr(t)&&Ls(e)?_s(vt(t),e):function(n){var r=sl(n,t);return r===void 0&&r===e?ph(n,t):_r(e,r,gh|mh)}}function Th(t){return function(e){return e?.[t]}}function Ah(t){return function(e){return Rr(e,t)}}function Rh(t){return Tr(t)?Th(vt(t)):Ah(t)}function Ie(t){return typeof t=="function"?t:t==null?nt:typeof t=="object"?L(t)?Eh(t[0],t[1]):fh(t):Rh(t)}function Sh(t,e,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;){var a=t[i];e(r,a,n(a),t)}return r}function Ih(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var c=a[++i];if(n(s[c],c,s)===!1)break}return e}}var Nh=Ih();function yh(t,e){return t&&Nh(t,e,ie)}function Oh(t,e){return function(n,r){if(n==null)return n;if(!Se(n))return t(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var Qe=Oh(yh);function Lh(t,e,n,r){return Qe(t,function(i,s,a){e(r,i,n(i),a)}),r}function _h(t,e){return function(n,r){var i=L(n)?Sh:Lh,s=e?e():{};return i(n,t,Ie(r),s)}}var Cs=Object.prototype,vh=Cs.hasOwnProperty,vr=gr(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&cs(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],a=gs(s),o=-1,c=a.length;++o<c;){var l=a[o],h=t[l];(h===void 0||Lt(h,Cs[l])&&!vh.call(t,l))&&(t[l]=s[l])}return t});function yi(t){return de(t)&&Se(t)}var Ch=200;function xh(t,e,n,r){var i=-1,s=os,a=!0,o=t.length,c=[],l=e.length;if(!o)return c;e.length>=Ch&&(s=Or,a=!1,e=new rt(e));e:for(;++i<o;){var h=t[i],u=h;if(h=h!==0?h:0,a&&u===u){for(var f=l;f--;)if(e[f]===u)continue e;c.push(h)}else s(e,u,r)||c.push(h)}return c}var On=gr(function(t,e){return yi(t)?xh(t,Ir(e,1,yi,!0)):[]});function it(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function F(t,e,n){var r=t==null?0:t.length;return r?(e=e===void 0?1:En(e),Es(t,e<0?0:e,r)):[]}function yt(t,e,n){var r=t==null?0:t.length;return r?(e=e===void 0?1:En(e),e=r-e,Es(t,0,e<0?0:e)):[]}function Ph(t){return typeof t=="function"?t:nt}function I(t,e){var n=L(t)?ss:Qe;return n(t,Ph(e))}function kh(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function bh(t,e){var n=!0;return Qe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}function fe(t,e,n){var r=L(t)?kh:bh;return r(t,Ie(e))}function xs(t,e){var n=[];return Qe(t,function(r,i,s){e(r,i,s)&&n.push(r)}),n}function se(t,e){var n=L(t)?Nr:xs;return n(t,Ie(e))}function wh(t){return function(e,n,r){var i=Object(e);if(!Se(e)){var s=Ie(n);e=ie(e),n=function(o){return s(i[o],o,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}var Mh=Math.max;function Uh(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:En(n);return i<0&&(i=Mh(r+i,0)),as(t,Ie(e),i)}var st=wh(Uh);function pe(t){return t&&t.length?t[0]:void 0}function Fh(t,e){var n=-1,r=Se(t)?Array(t.length):[];return Qe(t,function(i,s,a){r[++n]=e(i,s,a)}),r}function A(t,e){var n=L(t)?mn:Fh;return n(t,Ie(e))}function te(t,e){return Ir(A(t,e))}var $h=Object.prototype,Dh=$h.hasOwnProperty,Bh=_h(function(t,e,n){Dh.call(t,n)?t[n].push(e):dr(t,n,[e])}),Gh=Object.prototype,Wh=Gh.hasOwnProperty;function Kh(t,e){return t!=null&&Wh.call(t,e)}function S(t,e){return t!=null&&vs(t,e,Kh)}var zh="[object String]";function j(t){return typeof t=="string"||!L(t)&&de(t)&&Be(t)==zh}function jh(t,e){return mn(e,function(n){return t[n]})}function M(t){return t==null?[]:jh(t,ie(t))}var Hh=Math.max;function K(t,e,n,r){t=Se(t)?t:M(t),n=n?En(n):0;var i=t.length;return n<0&&(n=Hh(i+n,0)),j(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&fr(t,e,n)>-1}function Oi(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=0;return fr(t,e,i)}var Vh="[object Map]",qh="[object Set]",Yh=Object.prototype,Xh=Yh.hasOwnProperty;function C(t){if(t==null)return!0;if(Se(t)&&(L(t)||typeof t=="string"||typeof t.splice=="function"||St(t)||Er(t)||Rn(t)))return!t.length;var e=ee(t);if(e==Vh||e==qh)return!t.size;if(_t(t))return!ps(t).length;for(var n in t)if(Xh.call(t,n))return!1;return!0}var Qh="[object RegExp]";function Zh(t){return de(t)&&Be(t)==Qh}var Li=$e&&$e.isRegExp,ve=Li?Sn(Li):Zh;function Ce(t){return t===void 0}var Jh="Expected a function";function ef(t){if(typeof t!="function")throw new TypeError(Jh);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function tf(t,e,n,r){if(!re(t))return t;e=yn(e,t);for(var i=-1,s=e.length,a=s-1,o=t;o!=null&&++i<s;){var c=vt(e[i]),l=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=a){var h=o[c];l=void 0,l===void 0&&(l=re(h)?h:Tn(e[i+1])?[]:{})}An(o,c,l),o=o[c]}return t}function nf(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],o=Rr(t,a);n(o,a)&&tf(s,yn(a,t),o)}return s}function ge(t,e){if(t==null)return{};var n=mn(Il(t),function(r){return[r]});return e=Ie(e),nf(t,n,function(r,i){return e(r,i[0])})}function rf(t,e,n,r,i){return i(t,function(s,a,o){n=r?(r=!1,s):e(n,s,a,o)}),n}function Q(t,e,n){var r=L(t)?ol:rf,i=arguments.length<3;return r(t,Ie(e),n,i,Qe)}function Ln(t,e){var n=L(t)?Nr:xs;return n(t,ef(Ie(e)))}function sf(t,e){var n;return Qe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}function Ps(t,e,n){var r=L(t)?ys:sf;return r(t,Ie(e))}var af=1/0,of=tt&&1/Lr(new tt([,-0]))[1]==af?function(t){return new tt(t)}:w,cf=200;function lf(t,e,n){var r=-1,i=os,s=t.length,a=!0,o=[],c=o;if(s>=cf){var l=of(t);if(l)return Lr(l);a=!1,i=Or,c=new rt}else c=o;e:for(;++r<s;){var h=t[r],u=h;if(h=h!==0?h:0,a&&u===u){for(var f=c.length;f--;)if(c[f]===u)continue e;o.push(h)}else i(c,u,n)||(c!==o&&c.push(u),o.push(h))}return o}function Cr(t){return t&&t.length?lf(t):[]}function Yn(t){console&&console.error&&console.error(`Error: ${t}`)}function ks(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function bs(t){const e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function ws(t){function e(){}e.prototype=t;const n=new e;function r(){return typeof n.bar}return r(),r(),t}function uf(t){return hf(t)?t.LABEL:t.name}function hf(t){return j(t.LABEL)&&t.LABEL!==""}class Ne{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),I(this.definition,n=>{n.accept(e)})}}class Z extends Ne{constructor(e){super([]),this.idx=1,X(this,ge(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class at extends Ne{constructor(e){super(e.definition),this.orgText="",X(this,ge(e,n=>n!==void 0))}}class H extends Ne{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,X(this,ge(e,n=>n!==void 0))}}class z extends Ne{constructor(e){super(e.definition),this.idx=1,X(this,ge(e,n=>n!==void 0))}}class ye extends Ne{constructor(e){super(e.definition),this.idx=1,X(this,ge(e,n=>n!==void 0))}}class Oe extends Ne{constructor(e){super(e.definition),this.idx=1,X(this,ge(e,n=>n!==void 0))}}class U extends Ne{constructor(e){super(e.definition),this.idx=1,X(this,ge(e,n=>n!==void 0))}}class me extends Ne{constructor(e){super(e.definition),this.idx=1,X(this,ge(e,n=>n!==void 0))}}class Ee extends Ne{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,X(this,ge(e,n=>n!==void 0))}}class P{constructor(e){this.idx=1,X(this,ge(e,n=>n!==void 0))}accept(e){e.visit(this)}}function ff(t){return A(t,jt)}function jt(t){function e(n){return A(n,jt)}if(t instanceof Z){const n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return j(t.label)&&(n.label=t.label),n}else{if(t instanceof H)return{type:"Alternative",definition:e(t.definition)};if(t instanceof z)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof ye)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Oe)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:jt(new P({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof me)return{type:"RepetitionWithSeparator",idx:t.idx,separator:jt(new P({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof U)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Ee)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof P){const n={type:"Terminal",name:t.terminalType.name,label:uf(t.terminalType),idx:t.idx};j(t.label)&&(n.terminalLabel=t.label);const r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=ve(r)?r.source:r),n}else{if(t instanceof at)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class ot{visit(e){const n=e;switch(n.constructor){case Z:return this.visitNonTerminal(n);case H:return this.visitAlternative(n);case z:return this.visitOption(n);case ye:return this.visitRepetitionMandatory(n);case Oe:return this.visitRepetitionMandatoryWithSeparator(n);case me:return this.visitRepetitionWithSeparator(n);case U:return this.visitRepetition(n);case Ee:return this.visitAlternation(n);case P:return this.visitTerminal(n);case at:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function df(t){return t instanceof H||t instanceof z||t instanceof U||t instanceof ye||t instanceof Oe||t instanceof me||t instanceof P||t instanceof at}function an(t,e=[]){return t instanceof z||t instanceof U||t instanceof me?!0:t instanceof Ee?Ps(t.definition,r=>an(r,e)):t instanceof Z&&K(e,t)?!1:t instanceof Ne?(t instanceof Z&&e.push(t),fe(t.definition,r=>an(r,e))):!1}function pf(t){return t instanceof Ee}function Te(t){if(t instanceof Z)return"SUBRULE";if(t instanceof z)return"OPTION";if(t instanceof Ee)return"OR";if(t instanceof ye)return"AT_LEAST_ONE";if(t instanceof Oe)return"AT_LEAST_ONE_SEP";if(t instanceof me)return"MANY_SEP";if(t instanceof U)return"MANY";if(t instanceof P)return"CONSUME";throw Error("non exhaustive match")}class _n{walk(e,n=[]){I(e.definition,(r,i)=>{const s=F(e.definition,i+1);if(r instanceof Z)this.walkProdRef(r,s,n);else if(r instanceof P)this.walkTerminal(r,s,n);else if(r instanceof H)this.walkFlat(r,s,n);else if(r instanceof z)this.walkOption(r,s,n);else if(r instanceof ye)this.walkAtLeastOne(r,s,n);else if(r instanceof Oe)this.walkAtLeastOneSep(r,s,n);else if(r instanceof me)this.walkManySep(r,s,n);else if(r instanceof U)this.walkMany(r,s,n);else if(r instanceof Ee)this.walkOr(r,s,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){const i=n.concat(r);this.walk(e,i)}walkOption(e,n,r){const i=n.concat(r);this.walk(e,i)}walkAtLeastOne(e,n,r){const i=[new z({definition:e.definition})].concat(n,r);this.walk(e,i)}walkAtLeastOneSep(e,n,r){const i=_i(e,n,r);this.walk(e,i)}walkMany(e,n,r){const i=[new z({definition:e.definition})].concat(n,r);this.walk(e,i)}walkManySep(e,n,r){const i=_i(e,n,r);this.walk(e,i)}walkOr(e,n,r){const i=n.concat(r);I(e.definition,s=>{const a=new H({definition:[s]});this.walk(a,i)})}}function _i(t,e,n){return[new z({definition:[new P({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function xt(t){if(t instanceof Z)return xt(t.referencedRule);if(t instanceof P)return Ef(t);if(df(t))return gf(t);if(pf(t))return mf(t);throw Error("non exhaustive match")}function gf(t){let e=[];const n=t.definition;let r=0,i=n.length>r,s,a=!0;for(;i&&a;)s=n[r],a=an(s),e=e.concat(xt(s)),r=r+1,i=n.length>r;return Cr(e)}function mf(t){const e=A(t.definition,n=>xt(n));return Cr(he(e))}function Ef(t){return[t.terminalType]}const Ms="_~IN~_";class Tf extends _n{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){const i=Rf(e.referencedRule,e.idx)+this.topProd.name,s=n.concat(r),a=new H({definition:s}),o=xt(a);this.follows[i]=o}}function Af(t){const e={};return I(t,n=>{const r=new Tf(n).startWalking();X(e,r)}),e}function Rf(t,e){return t.name+e+Ms}function N(t){return t.charCodeAt(0)}function Dn(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function dt(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function et(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function Sf(){throw Error("Internal Error - Should never get here!")}function vi(t){return t.type==="Character"}const on=[];for(let t=N("0");t<=N("9");t++)on.push(t);const cn=[N("_")].concat(on);for(let t=N("a");t<=N("z");t++)cn.push(t);for(let t=N("A");t<=N("Z");t++)cn.push(t);const Ci=[N(" "),N("\f"),N(`
`),N("\r"),N("	"),N("\v"),N("	"),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N("\u2028"),N("\u2029"),N(" "),N(" "),N("　"),N("\uFEFF")],If=/[0-9a-fA-F]/,Dt=/[0-9]/,Nf=/[1-9]/;class yf{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":dt(r,"global");break;case"i":dt(r,"ignoreCase");break;case"m":dt(r,"multiLine");break;case"u":dt(r,"unicode");break;case"y":dt(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}et(n);const r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return Sf()}quantifier(e=!1){let n;const r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),n={atLeast:i,atMost:s}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;et(n);break}if(!(e===!0&&n===void 0)&&et(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),et(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[N(`
`),N("\r"),N("\u2028"),N("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=on;break;case"D":e=on,n=!0;break;case"s":e=Ci;break;case"S":e=Ci,n=!0;break;case"w":e=cn;break;case"W":e=cn,n=!0;break}if(et(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=N("\f");break;case"n":e=N(`
`);break;case"r":e=N("\r");break;case"t":e=N("	");break;case"v":e=N("\v");break}if(et(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:N("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:N(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:N(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const r=this.classAtom();if(r.type,vi(r)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,vi(i)){if(i.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:i.value})}else Dn(r.value,e),e.push(N("-")),Dn(i.value,e)}else Dn(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:N("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(Nf.test(e)===!1)throw Error("Expecting a positive integer");for(;Dt.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Dt.test(e)===!1)throw Error("Expecting an integer");for(;Dt.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:N(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Dt.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let i=0;i<e;i++){const s=this.popChar();if(If.test(s)===!1)throw Error("Expecting a HexDecimal digits");n+=s}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class xr{visitChildren(e){for(const n in e){const r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let Ht={};const Of=new yf;function vn(t){const e=t.toString();if(Ht.hasOwnProperty(e))return Ht[e];{const n=Of.pattern(e);return Ht[e]=n,n}}function Lf(){Ht={}}const Us="Complement Sets are not supported for first char optimization",ln=`Unable to use "first char" lexer optimizations:
`;function _f(t,e=!1){try{const n=vn(t);return Xn(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===Us)e&&ks(`${ln}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Yn(`${ln}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function Xn(t,e,n){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)Xn(t.value[i],e,n);break;case"Alternative":const r=t.value;for(let i=0;i<r.length;i++){const s=r[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":Bt(a.value,e,n);break;case"Set":if(a.complement===!0)throw Error(Us);I(a.value,c=>{if(typeof c=="number")Bt(c,e,n);else{const l=c;if(n===!0)for(let h=l.from;h<=l.to;h++)Bt(h,e,n);else{for(let h=l.from;h<=l.to&&h<mt;h++)Bt(h,e,n);if(l.to>=mt){const h=l.from>=mt?l.from:mt,u=l.to,f=De(h),d=De(u);for(let g=f;g<=d;g++)e[g]=g}}}});break;case"Group":Xn(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&Qn(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return M(e)}function Bt(t,e,n){const r=De(t);e[r]=r,n===!0&&vf(t,e)}function vf(t,e){const n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){const i=De(r.charCodeAt(0));e[i]=i}else{const i=n.toLowerCase();if(i!==n){const s=De(i.charCodeAt(0));e[s]=s}}}function xi(t,e){return st(t.value,n=>{if(typeof n=="number")return K(e,n);{const r=n;return st(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function Qn(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?L(t.value)?fe(t.value,Qn):Qn(t.value):!1}class Cf extends xr{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){K(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?xi(e,this.targetCharCodes)===void 0&&(this.found=!0):xi(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Pr(t,e){if(e instanceof RegExp){const n=vn(e),r=new Cf(t);return r.visit(n),r.found}else return st(e,n=>K(t,n.charCodeAt(0)))!==void 0}const Ve="PATTERN",gt="defaultMode",Gt="modes";let Fs=typeof new RegExp("(?:)").sticky=="boolean";function xf(t,e){e=vr(e,{useSticky:Fs,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(m,p)=>p()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{Jf()});let r;n("Reject Lexer.NA",()=>{r=Ln(t,m=>m[Ve]===G.NA)});let i=!1,s;n("Transform Patterns",()=>{i=!1,s=A(r,m=>{const p=m[Ve];if(ve(p)){const T=p.source;return T.length===1&&T!=="^"&&T!=="$"&&T!=="."&&!p.ignoreCase?T:T.length===2&&T[0]==="\\"&&!K(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],T[1])?T[1]:e.useSticky?ki(p):Pi(p)}else{if(Pe(p))return i=!0,{exec:p};if(typeof p=="object")return i=!0,p;if(typeof p=="string"){if(p.length===1)return p;{const T=p.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),_=new RegExp(T);return e.useSticky?ki(_):Pi(_)}}else throw Error("non exhaustive match")}})});let a,o,c,l,h;n("misc mapping",()=>{a=A(r,m=>m.tokenTypeIdx),o=A(r,m=>{const p=m.GROUP;if(p!==G.SKIPPED){if(j(p))return p;if(Ce(p))return!1;throw Error("non exhaustive match")}}),c=A(r,m=>{const p=m.LONGER_ALT;if(p)return L(p)?A(p,_=>Oi(r,_)):[Oi(r,p)]}),l=A(r,m=>m.PUSH_MODE),h=A(r,m=>S(m,"POP_MODE"))});let u;n("Line Terminator Handling",()=>{const m=Bs(e.lineTerminatorCharacters);u=A(r,p=>!1),e.positionTracking!=="onlyOffset"&&(u=A(r,p=>S(p,"LINE_BREAKS")?!!p.LINE_BREAKS:Ds(p,m)===!1&&Pr(m,p.PATTERN)))});let f,d,g,R;n("Misc Mapping #2",()=>{f=A(r,$s),d=A(s,Xf),g=Q(r,(m,p)=>{const T=p.GROUP;return j(T)&&T!==G.SKIPPED&&(m[T]=[]),m},{}),R=A(s,(m,p)=>({pattern:s[p],longerAlt:c[p],canLineTerminator:u[p],isCustom:f[p],short:d[p],group:o[p],push:l[p],pop:h[p],tokenTypeIdx:a[p],tokenType:r[p]}))});let y=!0,E=[];return e.safeMode||n("First Char Optimization",()=>{E=Q(r,(m,p,T)=>{if(typeof p.PATTERN=="string"){const _=p.PATTERN.charCodeAt(0),oe=De(_);Bn(m,oe,R[T])}else if(L(p.START_CHARS_HINT)){let _;I(p.START_CHARS_HINT,oe=>{const we=typeof oe=="string"?oe.charCodeAt(0):oe,We=De(we);_!==We&&(_=We,Bn(m,We,R[T]))})}else if(ve(p.PATTERN))if(p.PATTERN.unicode)y=!1,e.ensureOptimizations&&Yn(`${ln}	Unable to analyze < ${p.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const _=_f(p.PATTERN,e.ensureOptimizations);C(_)&&(y=!1),I(_,oe=>{Bn(m,oe,R[T])})}else e.ensureOptimizations&&Yn(`${ln}	TokenType: <${p.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),y=!1;return m},[])}),{emptyGroups:g,patternIdxToConfig:R,charCodeToPatternIdxToConfig:E,hasCustom:i,canBeOptimized:y}}function Pf(t,e){let n=[];const r=bf(t);n=n.concat(r.errors);const i=wf(r.valid),s=i.valid;return n=n.concat(i.errors),n=n.concat(kf(s)),n=n.concat(Wf(s)),n=n.concat(Kf(s,e)),n=n.concat(zf(s)),n}function kf(t){let e=[];const n=se(t,r=>ve(r[Ve]));return e=e.concat(Uf(n)),e=e.concat(Df(n)),e=e.concat(Bf(n)),e=e.concat(Gf(n)),e=e.concat(Ff(n)),e}function bf(t){const e=se(t,i=>!S(i,Ve)),n=A(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:b.MISSING_PATTERN,tokenTypes:[i]})),r=On(t,e);return{errors:n,valid:r}}function wf(t){const e=se(t,i=>{const s=i[Ve];return!ve(s)&&!Pe(s)&&!S(s,"exec")&&!j(s)}),n=A(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:b.INVALID_PATTERN,tokenTypes:[i]})),r=On(t,e);return{errors:n,valid:r}}const Mf=/[^\\][$]/;function Uf(t){class e extends xr{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const n=se(t,i=>{const s=i.PATTERN;try{const a=vn(s),o=new e;return o.visit(a),o.found}catch{return Mf.test(s.source)}});return A(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:b.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Ff(t){const e=se(t,r=>r.PATTERN.test(""));return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:b.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const $f=/[^\\[][\^]|^\^/;function Df(t){class e extends xr{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const n=se(t,i=>{const s=i.PATTERN;try{const a=vn(s),o=new e;return o.visit(a),o.found}catch{return $f.test(s.source)}});return A(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:b.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Bf(t){const e=se(t,r=>{const i=r[Ve];return i instanceof RegExp&&(i.multiline||i.global)});return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:b.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Gf(t){const e=[];let n=A(t,s=>Q(t,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!K(e,o)&&o.PATTERN!==G.NA&&(e.push(o),a.push(o)),a),[]));n=Ct(n);const r=se(n,s=>s.length>1);return A(r,s=>{const a=A(s,c=>c.name);return{message:`The same RegExp pattern ->${pe(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:b.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Wf(t){const e=se(t,r=>{if(!S(r,"GROUP"))return!1;const i=r.GROUP;return i!==G.SKIPPED&&i!==G.NA&&!j(i)});return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:b.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function Kf(t,e){const n=se(t,i=>i.PUSH_MODE!==void 0&&!K(e,i.PUSH_MODE));return A(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:b.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function zf(t){const e=[],n=Q(t,(r,i,s)=>{const a=i.PATTERN;return a===G.NA||(j(a)?r.push({str:a,idx:s,tokenType:i}):ve(a)&&Hf(a)&&r.push({str:a.source,idx:s,tokenType:i})),r},[]);return I(t,(r,i)=>{I(n,({str:s,idx:a,tokenType:o})=>{if(i<a&&jf(s,r.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:b.UNREACHABLE_PATTERN,tokenTypes:[r,o]})}})}),e}function jf(t,e){if(ve(e)){const n=e.exec(t);return n!==null&&n.index===0}else{if(Pe(e))return e(t,0,[],{});if(S(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function Hf(t){return st([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function Pi(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function ki(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function Vf(t,e,n){const r=[];return S(t,gt)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+gt+`> property in its definition
`,type:b.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),S(t,Gt)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Gt+`> property in its definition
`,type:b.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),S(t,Gt)&&S(t,gt)&&!S(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${gt}: <${t.defaultMode}>which does not exist
`,type:b.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),S(t,Gt)&&I(t.modes,(i,s)=>{I(i,(a,o)=>{if(Ce(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:b.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(S(a,"LONGER_ALT")){const c=L(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];I(c,l=>{!Ce(l)&&!K(i,l)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:b.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function qf(t,e,n){const r=[];let i=!1;const s=Ct(he(M(t.modes))),a=Ln(s,c=>c[Ve]===G.NA),o=Bs(n);return e&&I(a,c=>{const l=Ds(c,o);if(l!==!1){const u={message:Zf(c,l),type:l.issue,tokenType:c};r.push(u)}else S(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):Pr(o,c.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:b.NO_LINE_BREAKS_FLAGS}),r}function Yf(t){const e={},n=ie(t);return I(n,r=>{const i=t[r];if(L(i))e[r]=[];else throw Error("non exhaustive match")}),e}function $s(t){const e=t.PATTERN;if(ve(e))return!1;if(Pe(e))return!0;if(S(e,"exec"))return!0;if(j(e))return!1;throw Error("non exhaustive match")}function Xf(t){return j(t)&&t.length===1?t.charCodeAt(0):!1}const Qf={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function Ds(t,e){if(S(t,"LINE_BREAKS"))return!1;if(ve(t.PATTERN)){try{Pr(e,t.PATTERN)}catch(n){return{issue:b.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(j(t.PATTERN))return!1;if($s(t))return{issue:b.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Zf(t,e){if(e.issue===b.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===b.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Bs(t){return A(t,n=>j(n)?n.charCodeAt(0):n)}function Bn(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}const mt=256;let Vt=[];function De(t){return t<mt?t:Vt[t]}function Jf(){if(C(Vt)){Vt=new Array(65536);for(let t=0;t<65536;t++)Vt[t]=t>255?255+~~(t/255):t}}function Pt(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function un(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let bi=1;const Gs={};function kt(t){const e=ed(t);td(e),rd(e),nd(e),I(e,n=>{n.isParent=n.categoryMatches.length>0})}function ed(t){let e=D(t),n=t,r=!0;for(;r;){n=Ct(he(A(n,s=>s.CATEGORIES)));const i=On(n,e);e=e.concat(i),C(i)?r=!1:n=i}return e}function td(t){I(t,e=>{Ks(e)||(Gs[bi]=e,e.tokenTypeIdx=bi++),wi(e)&&!L(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),wi(e)||(e.CATEGORIES=[]),id(e)||(e.categoryMatches=[]),sd(e)||(e.categoryMatchesMap={})})}function nd(t){I(t,e=>{e.categoryMatches=[],I(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(Gs[r].tokenTypeIdx)})})}function rd(t){I(t,e=>{Ws([],e)})}function Ws(t,e){I(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),I(e.CATEGORIES,n=>{const r=t.concat(e);K(r,n)||Ws(r,n)})}function Ks(t){return S(t,"tokenTypeIdx")}function wi(t){return S(t,"CATEGORIES")}function id(t){return S(t,"categoryMatches")}function sd(t){return S(t,"categoryMatchesMap")}function ad(t){return S(t,"tokenTypeIdx")}const od={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var b;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(b||(b={}));const Et={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:od,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Et);class G{constructor(e,n=Et){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:o,value:c}=bs(s),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,c}else return s()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=X({},Et,n);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Et.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Qf;else if(this.config.lineTerminatorCharacters===Et.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),L(e)?i={modes:{defaultMode:D(e)},defaultMode:gt}:(s=!1,i=D(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Vf(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(qf(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},I(i.modes,(o,c)=>{i.modes[c]=Ln(o,l=>Ce(l))});const a=ie(i.modes);if(I(i.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Pf(o,a))}),C(this.lexerDefinitionErrors)){kt(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=xf(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=X({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!C(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=A(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}I(this.lexerDefinitionWarning,o=>{ks(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Fs?(this.chopInput=nt,this.match=this.matchWithTest):(this.updateLastIndex=w,this.match=this.matchWithExec),s&&(this.handleModes=w),this.trackStartLines===!1&&(this.computeNewColumn=nt),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=w),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=Q(this.canModeBeOptimized,(c,l,h)=>(l===!1&&c.push(h),c),[]);if(n.ensureOptimizations&&!C(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{Lf()}),this.TRACE_INIT("toFastProperties",()=>{ws(this)})})}tokenize(e,n=this.defaultMode){if(!C(this.lexerDefinitionErrors)){const i=A(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,i,s,a,o,c,l,h,u,f,d,g,R,y,E;const m=e,p=m.length;let T=0,_=0;const oe=this.hasCustom?0:Math.floor(e.length/10),we=new Array(oe),We=[];let ct=this.trackStartLines?1:void 0,Me=this.trackStartLines?1:void 0;const lt=Yf(this.emptyGroups),Ca=this.trackStartLines,wn=this.config.lineTerminatorsPattern;let Ut=0,Ue=[],ut=[];const Ft=[],Wr=[];Object.freeze(Wr);let ht;function Kr(){return Ue}function zr(B){const J=De(B),Je=ut[J];return Je===void 0?Wr:Je}const xa=B=>{if(Ft.length===1&&B.tokenType.PUSH_MODE===void 0){const J=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(B);We.push({offset:B.startOffset,line:B.startLine,column:B.startColumn,length:B.image.length,message:J})}else{Ft.pop();const J=it(Ft);Ue=this.patternIdxToConfig[J],ut=this.charCodeToPatternIdxToConfig[J],Ut=Ue.length;const Je=this.canModeBeOptimized[J]&&this.config.safeMode===!1;ut&&Je?ht=zr:ht=Kr}};function jr(B){Ft.push(B),ut=this.charCodeToPatternIdxToConfig[B],Ue=this.patternIdxToConfig[B],Ut=Ue.length,Ut=Ue.length;const J=this.canModeBeOptimized[B]&&this.config.safeMode===!1;ut&&J?ht=zr:ht=Kr}jr.call(this,n);let ce;const Hr=this.config.recoveryEnabled;for(;T<p;){c=null;const B=m.charCodeAt(T),J=ht(B),Je=J.length;for(r=0;r<Je;r++){ce=J[r];const V=ce.pattern;l=null;const Le=ce.short;if(Le!==!1?B===Le&&(c=V):ce.isCustom===!0?(E=V.exec(m,T,we,lt),E!==null?(c=E[0],E.payload!==void 0&&(l=E.payload)):c=null):(this.updateLastIndex(V,T),c=this.match(V,e,T)),c!==null){if(o=ce.longerAlt,o!==void 0){const Fe=o.length;for(s=0;s<Fe;s++){const _e=Ue[o[s]],Ke=_e.pattern;if(h=null,_e.isCustom===!0?(E=Ke.exec(m,T,we,lt),E!==null?(a=E[0],E.payload!==void 0&&(h=E.payload)):a=null):(this.updateLastIndex(Ke,T),a=this.match(Ke,e,T)),a&&a.length>c.length){c=a,l=h,ce=_e;break}}}break}}if(c!==null){if(u=c.length,f=ce.group,f!==void 0&&(d=ce.tokenTypeIdx,g=this.createTokenInstance(c,T,d,ce.tokenType,ct,Me,u),this.handlePayload(g,l),f===!1?_=this.addToken(we,_,g):lt[f].push(g)),e=this.chopInput(e,u),T=T+u,Me=this.computeNewColumn(Me,u),Ca===!0&&ce.canLineTerminator===!0){let V=0,Le,Fe;wn.lastIndex=0;do Le=wn.test(c),Le===!0&&(Fe=wn.lastIndex-1,V++);while(Le===!0);V!==0&&(ct=ct+V,Me=u-Fe,this.updateTokenEndLineColumnLocation(g,f,Fe,V,ct,Me,u))}this.handleModes(ce,xa,jr,g)}else{const V=T,Le=ct,Fe=Me;let _e=Hr===!1;for(;_e===!1&&T<p;)for(e=this.chopInput(e,1),T++,i=0;i<Ut;i++){const Ke=Ue[i],Mn=Ke.pattern,Vr=Ke.short;if(Vr!==!1?m.charCodeAt(T)===Vr&&(_e=!0):Ke.isCustom===!0?_e=Mn.exec(m,T,we,lt)!==null:(this.updateLastIndex(Mn,T),_e=Mn.exec(e)!==null),_e===!0)break}if(R=T-V,Me=this.computeNewColumn(Me,R),y=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(m,V,R,Le,Fe),We.push({offset:V,line:Le,column:Fe,length:R,message:y}),Hr===!1)break}}return this.hasCustom||(we.length=_),{tokens:we,groups:lt,errors:We}}handleModes(e,n,r,i){if(e.pop===!0){const s=e.push;n(i),s!==void 0&&r.call(this,s)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,i,s,a,o){let c,l;n!==void 0&&(c=r===o-1,l=c?-1:0,i===1&&c===!0||(e.endLine=s+l,e.endColumn=a-1+-l))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,n,r,i,s,a){return{image:e,startOffset:n,startLine:s,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,n,r,i,s,a,o){return{image:e,startOffset:n,endOffset:n+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){const r=e.exec(n);return r!==null?r[0]:null}}G.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";G.NA=/NOT_APPLICABLE/;function At(t){return zs(t)?t.LABEL:t.name}function zs(t){return j(t.LABEL)&&t.LABEL!==""}const cd="parent",Mi="categories",Ui="label",Fi="group",$i="push_mode",Di="pop_mode",Bi="longer_alt",Gi="line_breaks",Wi="start_chars_hint";function O(t){return ld(t)}function ld(t){const e=t.pattern,n={};if(n.name=t.name,Ce(e)||(n.PATTERN=e),S(t,cd))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return S(t,Mi)&&(n.CATEGORIES=t[Mi]),kt([n]),S(t,Ui)&&(n.LABEL=t[Ui]),S(t,Fi)&&(n.GROUP=t[Fi]),S(t,Di)&&(n.POP_MODE=t[Di]),S(t,$i)&&(n.PUSH_MODE=t[$i]),S(t,Bi)&&(n.LONGER_ALT=t[Bi]),S(t,Gi)&&(n.LINE_BREAKS=t[Gi]),S(t,Wi)&&(n.START_CHARS_HINT=t[Wi]),n}const qe=O({name:"EOF",pattern:G.NA});kt([qe]);function kr(t,e,n,r,i,s,a,o){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function ud(t,e){return Pt(t,e)}const js={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${zs(t)?`--> ${At(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){const s="Expecting: ",o=`
but found: '`+pe(e).image+"'";if(r)return s+r+o;{const c=Q(t,(f,d)=>f.concat(d),[]),l=A(c,f=>`[${A(f,d=>At(d)).join(", ")}]`),u=`one of these possible Token sequences:
${A(l,(f,d)=>`  ${d+1}. ${f}`).join(`
`)}`;return s+u+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){const i="Expecting: ",a=`
but found: '`+pe(e).image+"'";if(n)return i+n+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${A(t,l=>`[${A(l,h=>At(h)).join(",")}]`).join(" ,")}>`;return i+c+a}}};Object.freeze(js);const hd={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},ze={buildDuplicateFoundError(t,e){function n(h){return h instanceof P?h.terminalType.name:h instanceof Z?h.nonTerminalName:""}const r=t.name,i=pe(e),s=i.idx,a=Te(i),o=n(i),c=s>0;let l=`->${a}${c?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=A(t.prefixPath,i=>At(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=A(t.prefixPath,i=>At(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=Te(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,n=A(t.leftRecursionPath,s=>s.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof at?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function fd(t,e){const n=new dd(t,e);return n.resolveRefs(),n.errors}class dd extends ot{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){I(M(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:W.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class pd extends _n{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=D(this.path.ruleStack).reverse(),this.occurrenceStack=D(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){C(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class gd extends pd{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=n.concat(r),s=new H({definition:i});this.possibleTokTypes=xt(s),this.found=!0}}}class Cn extends _n{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class md extends Cn{walkMany(e,n,r){if(e.idx===this.occurrence){const i=pe(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,n,r)}}class Ki extends Cn{walkManySep(e,n,r){if(e.idx===this.occurrence){const i=pe(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,n,r)}}class Ed extends Cn{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){const i=pe(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,n,r)}}class zi extends Cn{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){const i=pe(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,n,r)}}function Zn(t,e,n=[]){n=D(n);let r=[],i=0;function s(o){return o.concat(F(t,i+1))}function a(o){const c=Zn(s(o),e,n);return r.concat(c)}for(;n.length<e&&i<t.length;){const o=t[i];if(o instanceof H)return a(o.definition);if(o instanceof Z)return a(o.definition);if(o instanceof z)r=a(o.definition);else if(o instanceof ye){const c=o.definition.concat([new U({definition:o.definition})]);return a(c)}else if(o instanceof Oe){const c=[new H({definition:o.definition}),new U({definition:[new P({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof me){const c=o.definition.concat([new U({definition:[new P({terminalType:o.separator})].concat(o.definition)})]);r=a(c)}else if(o instanceof U){const c=o.definition.concat([new U({definition:o.definition})]);r=a(c)}else{if(o instanceof Ee)return I(o.definition,c=>{C(c.definition)===!1&&(r=a(c.definition))}),r;if(o instanceof P)n.push(o.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:F(t,i)}),r}function Hs(t,e,n,r){const i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE";let o=!1;const c=e.length,l=c-r-1,h=[],u=[];for(u.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!C(u);){const f=u.pop();if(f===a){o&&it(u).idx<=l&&u.pop();continue}const d=f.def,g=f.idx,R=f.ruleStack,y=f.occurrenceStack;if(C(d))continue;const E=d[0];if(E===i){const m={idx:g,def:F(d),ruleStack:yt(R),occurrenceStack:yt(y)};u.push(m)}else if(E instanceof P)if(g<c-1){const m=g+1,p=e[m];if(n(p,E.terminalType)){const T={idx:m,def:F(d),ruleStack:R,occurrenceStack:y};u.push(T)}}else if(g===c-1)h.push({nextTokenType:E.terminalType,nextTokenOccurrence:E.idx,ruleStack:R,occurrenceStack:y}),o=!0;else throw Error("non exhaustive match");else if(E instanceof Z){const m=D(R);m.push(E.nonTerminalName);const p=D(y);p.push(E.idx);const T={idx:g,def:E.definition.concat(s,F(d)),ruleStack:m,occurrenceStack:p};u.push(T)}else if(E instanceof z){const m={idx:g,def:F(d),ruleStack:R,occurrenceStack:y};u.push(m),u.push(a);const p={idx:g,def:E.definition.concat(F(d)),ruleStack:R,occurrenceStack:y};u.push(p)}else if(E instanceof ye){const m=new U({definition:E.definition,idx:E.idx}),p=E.definition.concat([m],F(d)),T={idx:g,def:p,ruleStack:R,occurrenceStack:y};u.push(T)}else if(E instanceof Oe){const m=new P({terminalType:E.separator}),p=new U({definition:[m].concat(E.definition),idx:E.idx}),T=E.definition.concat([p],F(d)),_={idx:g,def:T,ruleStack:R,occurrenceStack:y};u.push(_)}else if(E instanceof me){const m={idx:g,def:F(d),ruleStack:R,occurrenceStack:y};u.push(m),u.push(a);const p=new P({terminalType:E.separator}),T=new U({definition:[p].concat(E.definition),idx:E.idx}),_=E.definition.concat([T],F(d)),oe={idx:g,def:_,ruleStack:R,occurrenceStack:y};u.push(oe)}else if(E instanceof U){const m={idx:g,def:F(d),ruleStack:R,occurrenceStack:y};u.push(m),u.push(a);const p=new U({definition:E.definition,idx:E.idx}),T=E.definition.concat([p],F(d)),_={idx:g,def:T,ruleStack:R,occurrenceStack:y};u.push(_)}else if(E instanceof Ee)for(let m=E.definition.length-1;m>=0;m--){const p=E.definition[m],T={idx:g,def:p.definition.concat(F(d)),ruleStack:R,occurrenceStack:y};u.push(T),u.push(a)}else if(E instanceof H)u.push({idx:g,def:E.definition.concat(F(d)),ruleStack:R,occurrenceStack:y});else if(E instanceof at)u.push(Td(E,g,R,y));else throw Error("non exhaustive match")}return h}function Td(t,e,n,r){const i=D(n);i.push(t.name);const s=D(r);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}var k;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(k||(k={}));function Vs(t){if(t instanceof z||t==="Option")return k.OPTION;if(t instanceof U||t==="Repetition")return k.REPETITION;if(t instanceof ye||t==="RepetitionMandatory")return k.REPETITION_MANDATORY;if(t instanceof Oe||t==="RepetitionMandatoryWithSeparator")return k.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof me||t==="RepetitionWithSeparator")return k.REPETITION_WITH_SEPARATOR;if(t instanceof Ee||t==="Alternation")return k.ALTERNATION;throw Error("non exhaustive match")}function Ad(t,e,n,r,i,s){const a=br(t,e,n),o=Xs(a)?un:Pt;return s(a,r,o,i)}function Rd(t,e,n,r,i,s){const a=wr(t,e,i,n),o=Xs(a)?un:Pt;return s(a[0],o,r)}function Sd(t,e,n,r){const i=t.length,s=fe(t,a=>fe(a,o=>o.length===1));if(e)return function(a){const o=A(a,c=>c.GATE);for(let c=0;c<i;c++){const l=t[c],h=l.length,u=o[c];if(!(u!==void 0&&u.call(this)===!1))e:for(let f=0;f<h;f++){const d=l[f],g=d.length;for(let R=0;R<g;R++){const y=this.LA(R+1);if(n(y,d[R])===!1)continue e}return c}}};if(s&&!r){const a=A(t,c=>he(c)),o=Q(a,(c,l,h)=>(I(l,u=>{S(c,u.tokenTypeIdx)||(c[u.tokenTypeIdx]=h),I(u.categoryMatches,f=>{S(c,f)||(c[f]=h)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const o=t[a],c=o.length;e:for(let l=0;l<c;l++){const h=o[l],u=h.length;for(let f=0;f<u;f++){const d=this.LA(f+1);if(n(d,h[f])===!1)continue e}return a}}}}function Id(t,e,n){const r=fe(t,s=>s.length===1),i=t.length;if(r&&!n){const s=he(t);if(s.length===1&&C(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=Q(s,(o,c,l)=>(o[c.tokenTypeIdx]=!0,I(c.categoryMatches,h=>{o[h]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const a=t[s],o=a.length;for(let c=0;c<o;c++){const l=this.LA(c+1);if(e(l,a[c])===!1)continue e}return!0}return!1}}class Nd extends _n{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,k.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,k.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,k.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,k.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,k.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}}class qs extends ot{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,k.OPTION)}visitRepetition(e){this.checkIsTarget(e,k.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,k.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,k.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,k.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,k.ALTERNATION)}}function ji(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function Gn(t){let e=[""];for(let n=0;n<t.length;n++){const r=t[n],i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a+"_"+r.tokenTypeIdx);for(let o=0;o<r.categoryMatches.length;o++){const c="_"+r.categoryMatches[o];i.push(a+c)}}e=i}return e}function yd(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;const i=t[r];for(let s=0;s<e.length;s++){const a=e[s];if(i[a]===!0)return!1}}return!0}function Ys(t,e){const n=A(t,a=>Zn([a],1)),r=ji(n.length),i=A(n,a=>{const o={};return I(a,c=>{const l=Gn(c.partialPath);I(l,h=>{o[h]=!0})}),o});let s=n;for(let a=1;a<=e;a++){const o=s;s=ji(o.length);for(let c=0;c<o.length;c++){const l=o[c];for(let h=0;h<l.length;h++){const u=l[h].partialPath,f=l[h].suffixDef,d=Gn(u);if(yd(i,d,c)||C(f)||u.length===e){const R=r[c];if(Jn(R,u)===!1){R.push(u);for(let y=0;y<d.length;y++){const E=d[y];i[c][E]=!0}}}else{const R=Zn(f,a+1,u);s[c]=s[c].concat(R),I(R,y=>{const E=Gn(y.partialPath);I(E,m=>{i[c][m]=!0})})}}}}return r}function br(t,e,n,r){const i=new qs(t,k.ALTERNATION,r);return e.accept(i),Ys(i.result,n)}function wr(t,e,n,r){const i=new qs(t,n);e.accept(i);const s=i.result,o=new Nd(e,t,n).startWalking(),c=new H({definition:s}),l=new H({definition:o});return Ys([c,l],r)}function Jn(t,e){e:for(let n=0;n<t.length;n++){const r=t[n];if(r.length===e.length){for(let i=0;i<r.length;i++){const s=e[i],a=r[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Od(t,e){return t.length<e.length&&fe(t,(n,r)=>{const i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function Xs(t){return fe(t,e=>fe(e,n=>fe(n,r=>C(r.categoryMatches))))}function Ld(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return A(e,n=>Object.assign({type:W.CUSTOM_LOOKAHEAD_VALIDATION},n))}function _d(t,e,n,r){const i=te(t,c=>vd(c,n)),s=Bd(t,e,n),a=te(t,c=>Ud(c,n)),o=te(t,c=>Pd(c,t,r,n));return i.concat(s,a,o)}function vd(t,e){const n=new xd;t.accept(n);const r=n.allProductions,i=Bh(r,Cd),s=ge(i,o=>o.length>1);return A(M(s),o=>{const c=pe(o),l=e.buildDuplicateFoundError(t,o),h=Te(c),u={message:l,type:W.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:h,occurrence:c.idx},f=Qs(c);return f&&(u.parameter=f),u})}function Cd(t){return`${Te(t)}_#_${t.idx}_#_${Qs(t)}`}function Qs(t){return t instanceof P?t.terminalType.name:t instanceof Z?t.nonTerminalName:""}class xd extends ot{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function Pd(t,e,n,r){const i=[];if(Q(e,(a,o)=>o.name===t.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:a,type:W.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function kd(t,e,n){const r=[];let i;return K(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:W.INVALID_RULE_OVERRIDE,ruleName:t})),r}function Zs(t,e,n,r=[]){const i=[],s=qt(e.definition);if(C(s))return[];{const a=t.name;K(s,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:W.LEFT_RECURSION,ruleName:a});const c=On(s,r.concat([t])),l=te(c,h=>{const u=D(r);return u.push(h),Zs(t,h,n,u)});return i.concat(l)}}function qt(t){let e=[];if(C(t))return e;const n=pe(t);if(n instanceof Z)e.push(n.referencedRule);else if(n instanceof H||n instanceof z||n instanceof ye||n instanceof Oe||n instanceof me||n instanceof U)e=e.concat(qt(n.definition));else if(n instanceof Ee)e=he(A(n.definition,s=>qt(s.definition)));else if(!(n instanceof P))throw Error("non exhaustive match");const r=an(n),i=t.length>1;if(r&&i){const s=F(t);return e.concat(qt(s))}else return e}class Mr extends ot{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function bd(t,e){const n=new Mr;t.accept(n);const r=n.alternations;return te(r,s=>{const a=yt(s.definition);return te(a,(o,c)=>{const l=Hs([o],[],Pt,1);return C(l)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:c}),type:W.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:c+1}]:[]})})}function wd(t,e,n){const r=new Mr;t.accept(r);let i=r.alternations;return i=Ln(i,a=>a.ignoreAmbiguities===!0),te(i,a=>{const o=a.idx,c=a.maxLookahead||e,l=br(o,t,c,a),h=$d(l,a,t,n),u=Dd(l,a,t,n);return h.concat(u)})}class Md extends ot{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function Ud(t,e){const n=new Mr;t.accept(n);const r=n.alternations;return te(r,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:W.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function Fd(t,e,n){const r=[];return I(t,i=>{const s=new Md;i.accept(s);const a=s.allProductions;I(a,o=>{const c=Vs(o),l=o.maxLookahead||e,h=o.idx,f=wr(h,i,c,l)[0];if(C(he(f))){const d=n.buildEmptyRepetitionError({topLevelRule:i,repetition:o});r.push({message:d,type:W.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function $d(t,e,n,r){const i=[],s=Q(t,(o,c,l)=>(e.definition[l].ignoreAmbiguities===!0||I(c,h=>{const u=[l];I(t,(f,d)=>{l!==d&&Jn(f,h)&&e.definition[d].ignoreAmbiguities!==!0&&u.push(d)}),u.length>1&&!Jn(i,h)&&(i.push(h),o.push({alts:u,path:h}))}),o),[]);return A(s,o=>{const c=A(o.alts,h=>h+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:W.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:o.alts}})}function Dd(t,e,n,r){const i=Q(t,(a,o,c)=>{const l=A(o,h=>({idx:c,path:h}));return a.concat(l)},[]);return Ct(te(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,l=a.path,h=se(i,f=>e.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<c&&Od(f.path,l));return A(h,f=>{const d=[f.idx+1,c+1],g=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:d,prefixPath:f.path}),type:W.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:g,alternatives:d}})}))}function Bd(t,e,n){const r=[],i=A(e,s=>s.name);return I(t,s=>{const a=s.name;if(K(i,a)){const o=n.buildNamespaceConflictError(s);r.push({message:o,type:W.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}function Gd(t){const e=vr(t,{errMsgProvider:hd}),n={};return I(t.rules,r=>{n[r.name]=r}),fd(n,e.errMsgProvider)}function Wd(t){return t=vr(t,{errMsgProvider:ze}),_d(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const Js="MismatchedTokenException",ea="NoViableAltException",ta="EarlyExitException",na="NotAllInputParsedException",ra=[Js,ea,ta,na];Object.freeze(ra);function hn(t){return K(ra,t.name)}class xn extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class ia extends xn{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=Js}}class Kd extends xn{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=ea}}class zd extends xn{constructor(e,n){super(e,n),this.name=na}}class jd extends xn{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=ta}}const Wn={},sa="InRuleRecoveryException";class Hd extends Error{constructor(e){super(e),this.name=sa}}class Vd{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=S(e,"recoveryEnabled")?e.recoveryEnabled:xe.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=qd)}getTokenToInsert(e){const n=kr(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,i){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const l=this.LA(1);let h=this.LA(1);const u=()=>{const f=this.LA(0),d=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:f,ruleName:this.getCurrRuleFullName()}),g=new ia(d,l,this.LA(0));g.resyncedTokens=yt(o),this.SAVE_ERROR(g)};for(;!c;)if(this.tokenMatcher(h,i)){u();return}else if(r.call(this)){u(),e.apply(this,n);return}else this.tokenMatcher(h,s)?c=!0:(h=this.SKIP_TOKEN(),this.addToResyncTokens(h,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new Hd("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||C(n))return!1;const r=this.LA(1);return st(n,s=>this.tokenMatcher(r,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return K(r,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),r=2;for(;;){const i=st(e,s=>ud(n,s));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Wn;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return A(e,(r,i)=>i===0?Wn:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=A(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return he(e)}getFollowSetFromFollowKey(e){if(e===Wn)return[qe];const n=e.ruleName+e.idxInCallingRule+Ms+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,qe)||n.push(e),n}reSyncTo(e){const n=[];let r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return yt(n)}attemptInRepetitionRecovery(e,n,r,i,s,a,o){}getCurrentGrammarPath(e,n){const r=this.getHumanReadableRuleStack(),i=D(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return A(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function qd(t,e,n,r,i,s,a){const o=this.getKeyForAutomaticLookahead(r,i);let c=this.firstAfterRepMap[o];if(c===void 0){const f=this.getCurrRuleFullName(),d=this.getGAstProductions()[f];c=new s(d,i).startWalking(),this.firstAfterRepMap[o]=c}let l=c.token,h=c.occurrence;const u=c.isEndOfRule;this.RULE_STACK.length===1&&u&&l===void 0&&(l=qe,h=1),!(l===void 0||h===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,h,a)&&this.tryInRepetitionRecovery(t,e,n,l)}const Yd=4,Ge=8,aa=1<<Ge,oa=2<<Ge,er=3<<Ge,tr=4<<Ge,nr=5<<Ge,Yt=6<<Ge;function Kn(t,e,n){return n|e|t}class Xd{constructor(e){var n;this.maxLookahead=(n=e?.maxLookahead)!==null&&n!==void 0?n:xe.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(C(n)){const r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...i,...s]}return n}validateNoLeftRecursion(e){return te(e,n=>Zs(n,n,ze))}validateEmptyOrAlternatives(e){return te(e,n=>bd(n,ze))}validateAmbiguousAlternationAlternatives(e,n){return te(e,r=>wd(r,n,ze))}validateSomeNonEmptyLookaheadPath(e,n){return Fd(e,n,ze)}buildLookaheadForAlternation(e){return Ad(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Sd)}buildLookaheadForOptional(e){return Rd(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Vs(e.prodType),Id)}}class Qd{initLooksAhead(e){this.dynamicTokensEnabled=S(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:xe.dynamicTokensEnabled,this.maxLookahead=S(e,"maxLookahead")?e.maxLookahead:xe.maxLookahead,this.lookaheadStrategy=S(e,"lookaheadStrategy")?e.lookaheadStrategy:new Xd({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){I(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:r,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=Jd(n);I(r,l=>{const h=l.idx===0?"":l.idx;this.TRACE_INIT(`${Te(l)}${h}`,()=>{const u=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:n,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=Kn(this.fullRuleNameToShort[n.name],aa,l.idx);this.setLaFuncCache(f,u)})}),I(i,l=>{this.computeLookaheadFunc(n,l.idx,er,"Repetition",l.maxLookahead,Te(l))}),I(s,l=>{this.computeLookaheadFunc(n,l.idx,oa,"Option",l.maxLookahead,Te(l))}),I(a,l=>{this.computeLookaheadFunc(n,l.idx,tr,"RepetitionMandatory",l.maxLookahead,Te(l))}),I(o,l=>{this.computeLookaheadFunc(n,l.idx,Yt,"RepetitionMandatoryWithSeparator",l.maxLookahead,Te(l))}),I(c,l=>{this.computeLookaheadFunc(n,l.idx,nr,"RepetitionWithSeparator",l.maxLookahead,Te(l))})})})}computeLookaheadFunc(e,n,r,i,s,a){this.TRACE_INIT(`${a}${n===0?"":n}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=Kn(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,n){const r=this.getLastExplicitRuleShortName();return Kn(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}}class Zd extends ot{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const Wt=new Zd;function Jd(t){Wt.reset(),t.accept(Wt);const e=Wt.dslMethods;return Wt.reset(),e}function Hi(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function Vi(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function ep(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function tp(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}const np="name";function ca(t,e){Object.defineProperty(t,np,{enumerable:!1,configurable:!0,writable:!1,value:e})}function rp(t,e){const n=ie(t),r=n.length;for(let i=0;i<r;i++){const s=n[i],a=t[s],o=a.length;for(let c=0;c<o;c++){const l=a[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function ip(t,e){const n=function(){};ca(n,t+"BaseSemantics");const r={visit:function(i,s){if(L(i)&&(i=i[0]),!Ce(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=ap(this,e);if(!C(i)){const s=A(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function sp(t,e,n){const r=function(){};ca(r,t+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return I(e,s=>{i[s]=rp}),r.prototype=i,r.prototype.constructor=r,r}var rr;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(rr||(rr={}));function ap(t,e){return op(t,e)}function op(t,e){const n=se(e,i=>Pe(t[i])===!1),r=A(n,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:rr.MISSING_METHOD,methodName:i}));return Ct(r)}class cp{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=S(e,"nodeLocationTracking")?e.nodeLocationTracking:xe.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=w,this.cstFinallyStateUpdate=w,this.cstPostTerminal=w,this.cstPostNonTerminal=w,this.cstPostRule=w;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Vi,this.setNodeLocationFromNode=Vi,this.cstPostRule=w,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=w,this.setNodeLocationFromNode=w,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Hi,this.setNodeLocationFromNode=Hi,this.cstPostRule=w,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=w,this.setNodeLocationFromNode=w,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=w,this.setNodeLocationFromNode=w,this.cstPostRule=w,this.setInitialNodeLocation=w;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];ep(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];tp(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(Ce(this.baseCstVisitorConstructor)){const e=ip(this.className,ie(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Ce(this.baseCstVisitorWithDefaultsConstructor)){const e=sp(this.className,ie(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class lp{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):dn}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?dn:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class up{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=pn){if(K(this.definedRulesNames,e)){const a={message:ze.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:W.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,n,r);return this[e]=i,i}OVERRIDE_RULE(e,n,r=pn){const i=kd(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,n,r);return this[e]=s,s}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(hn(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return ff(M(this.gastProductionsCache))}}class hp{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=un,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},S(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(L(e)){if(C(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(L(e))this.tokensMap=Q(e,(s,a)=>(s[a.name]=a,s),{});else if(S(e,"modes")&&fe(he(M(e.modes)),ad)){const s=he(M(e.modes)),a=Cr(s);this.tokensMap=Q(a,(o,c)=>(o[c.name]=c,o),{})}else if(re(e))this.tokensMap=D(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=qe;const r=S(e,"modes")?he(M(e.modes)):M(e),i=fe(r,s=>C(s.categoryMatches));this.tokenMatcher=i?un:Pt,kt(M(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=S(r,"resyncEnabled")?r.resyncEnabled:pn.resyncEnabled,s=S(r,"recoveryValueFunc")?r.recoveryValueFunc:pn.recoveryValueFunc,a=this.ruleShortNameIdx<<Yd+Ge;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...h){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,h);const u=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(u),u}catch(u){return this.invokeRuleCatch(u,i,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...h){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,h)}catch(u){return this.invokeRuleCatch(u,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){const i=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(hn(e)){const a=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return r(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(i)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,n){const r=this.getKeyForAutomaticLookahead(oa,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,n){const r=this.getKeyForAutomaticLookahead(tr,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const a=n.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=n;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,k.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],i,tr,e,Ed)}atLeastOneSepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(Yt,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,zi],o,Yt,e,zi)}else throw this.raiseEarlyExitException(e,k.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const r=this.getKeyForAutomaticLookahead(er,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const o=n.GATE;if(o!==void 0){const c=i;i=()=>o.call(this)&&c.call(this)}}else s=n;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],i,er,e,md,a)}manySepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(nr,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,Ki],o,nr,e,Ki)}}repetitionSepSecondInternal(e,n,r,i,s){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,s],r,Yt,e,s)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const r=this.getKeyForAutomaticLookahead(aa,n),i=L(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new zd(n,e))}}subruleInternal(e,n,r){let i;try{const s=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=e.apply(this,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,r,e.ruleName)}}subruleInternalError(e,n,r){throw hn(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,r)}catch(s){i=this.consumeInternalRecovery(e,n,s)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,n,r){let i;const s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new ia(i,n,s))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===sa?r:s}}else throw r}saveRecogState(){const e=this.errors,n=D(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),qe)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class fp{initErrorHandler(e){this._errors=[],this.errorMessageProvider=S(e,"errorMessageProvider")?e.errorMessageProvider:xe.errorMessageProvider}SAVE_ERROR(e){if(hn(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:D(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return D(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=wr(e,s,n,this.maxLookahead)[0],c=[];for(let h=1;h<=this.maxLookahead;h++)c.push(this.LA(h));const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new jd(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=br(e,i,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Kd(c,this.LA(1),o))}}class dp{initContentAssist(){}computeContentAssist(e,n){const r=this.gastProductionsCache[e];if(Ce(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Hs([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=pe(e.ruleStack),i=this.getGAstProductions()[n];return new gd(i,e).startWalking()}}const Pn={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Pn);const qi=!0,Yi=Math.pow(2,Ge)-1,la=O({name:"RECORDING_PHASE_TOKEN",pattern:G.NA});kt([la]);const ua=kr(la,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(ua);const pp={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class gp{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return dn}topLevelRuleRecord(e,n){try{const r=new at({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return pt.call(this,z,e,n)}atLeastOneInternalRecord(e,n){pt.call(this,ye,n,e)}atLeastOneSepFirstInternalRecord(e,n){pt.call(this,Oe,n,e,qi)}manyInternalRecord(e,n){pt.call(this,U,n,e)}manySepFirstInternalRecord(e,n){pt.call(this,me,n,e,qi)}orInternalRecord(e,n){return mp.call(this,e,n)}subruleInternalRecord(e,n,r){if(fn(n),!e||S(e,"ruleName")===!1){const o=new Error(`<SUBRULE${Xi(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=it(this.recordingProdStack),s=e.ruleName,a=new Z({idx:n,nonTerminalName:s,label:r?.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?pp:Pn}consumeInternalRecord(e,n,r){if(fn(n),!Ks(e)){const a=new Error(`<CONSUME${Xi(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=it(this.recordingProdStack),s=new P({idx:n,terminalType:e,label:r?.LABEL});return i.definition.push(s),ua}}function pt(t,e,n,r=!1){fn(n);const i=it(this.recordingProdStack),s=Pe(e)?e:e.DEF,a=new t({definition:[],idx:n});return r&&(a.separator=e.SEP),S(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),Pn}function mp(t,e){fn(e);const n=it(this.recordingProdStack),r=L(t)===!1,i=r===!1?t:t.DEF,s=new Ee({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});S(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const a=Ps(i,o=>Pe(o.GATE));return s.hasPredicates=a,n.definition.push(s),I(i,o=>{const c=new H({definition:[]});s.definition.push(c),S(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:S(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),Pn}function Xi(t){return t===0?"":`${t}`}function fn(t){if(t<0||t>Yi){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${Yi+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class Ep{initPerformanceTracer(e){if(S(e,"traceInitPerf")){const n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=xe.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);const{time:i,value:s}=bs(n),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return n()}}function Tp(t,e){e.forEach(n=>{const r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=n.prototype[i]})})}const dn=kr(qe,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(dn);const xe=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:js,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),pn=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var W;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(W||(W={}));class bt{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{ws(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),I(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=Gd({rules:M(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(C(r)&&this.skipValidations===!1){const i=Wd({rules:M(this.gastProductionsCache),tokenTypes:M(this.tokensMap),errMsgProvider:ze,grammarName:n}),s=Ld({lookaheadStrategy:this.lookaheadStrategy,rules:M(this.gastProductionsCache),tokenTypes:M(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,s)}}),C(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=Af(M(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:M(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(M(this.gastProductionsCache))})),!bt.DEFER_DEFINITION_ERRORS_HANDLING&&!C(this.definitionErrors))throw e=A(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),S(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=S(n,"skipValidations")?n.skipValidations:xe.skipValidations}}bt.DEFER_DEFINITION_ERRORS_HANDLING=!1;Tp(bt,[Vd,Qd,cp,lp,hp,up,fp,dp,gp,Ep]);class Ap extends bt{constructor(e,n=xe){const r=D(n);r.outputCst=!0,super(e,r)}}var wt=O({name:"Token",pattern:/NA/}),ae=O({name:"Keyword",categories:wt}),Ze=O({name:"Operator",categories:wt}),kn=O({name:"Separator",categories:wt}),ha=O({name:"Literal",categories:wt}),Rp=O({name:"Identifier",categories:wt}),Sp=O({name:"WhiteSpace",pattern:/\s+/,group:G.SKIPPED}),fa=O({name:"And",pattern:/AND\b/i,categories:ae}),da=O({name:"Or",pattern:/OR\b/i,categories:ae}),pa=O({name:"Not",pattern:/NOT\b/i,categories:ae}),ir=O({name:"True",pattern:/true\b/i,categories:ae}),sr=O({name:"False",pattern:/false\b/i,categories:ae}),ar=O({name:"Null",pattern:/null\b/i,categories:ae}),Xt=O({name:"Contains",pattern:/contains\b/i,categories:ae}),Qt=O({name:"StartsWith",pattern:/startsWith\b/i,categories:ae}),Zt=O({name:"EndsWith",pattern:/endsWith\b/i,categories:ae}),or=O({name:"Any",pattern:/any\b/i,categories:ae}),cr=O({name:"All",pattern:/all\b/i,categories:ae}),lr=O({name:"None",pattern:/none\b/i,categories:ae}),ga=O({name:"GreaterThanOrEqual",pattern:/>=/,categories:Ze,start_chars_hint:[">"]}),ma=O({name:"LessThanOrEqual",pattern:/<=/,categories:Ze,start_chars_hint:["<"]}),Ea=O({name:"NotEquals",pattern:/!=/,categories:Ze,start_chars_hint:["!"]}),Ta=O({name:"GreaterThan",pattern:/>/,categories:Ze,start_chars_hint:[">"]}),Aa=O({name:"LessThan",pattern:/</,categories:Ze,start_chars_hint:["<"]}),Ra=O({name:"Equals",pattern:/=/,categories:Ze,start_chars_hint:["="]}),Sa=O({name:"Colon",pattern:/:/,categories:Ze,start_chars_hint:[":"]}),Jt=O({name:"LParen",pattern:/\(/,categories:kn,start_chars_hint:["("]}),en=O({name:"RParen",pattern:/\)/,categories:kn,start_chars_hint:[")"]}),tn=O({name:"Comma",pattern:/,/,categories:kn,start_chars_hint:[","]}),Ia=O({name:"Dot",pattern:/\./,categories:kn,start_chars_hint:["."]}),Ip=O({name:"Eof",pattern:G.NA}),nn=O({name:"StringLiteral",pattern:/"(:?[^\\"]|\\(:?[bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/,categories:ha}),ur=O({name:"NumberLiteral",pattern:/-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?/,categories:ha}),hr=O({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z0-9_-]*/,categories:Rp}),Na=[Sp,fa,da,pa,ir,sr,ar,Xt,Qt,Zt,or,cr,lr,ga,ma,Ea,Ta,Aa,Ra,Sa,Jt,en,tn,Ia,nn,ur,hr,Ip],ya=class extends Ap{constructor(){super(Na,{recoveryEnabled:!0,nodeLocationTracking:"full"}),this.performSelfAnalysis()}expression=this.RULE("expression",()=>{this.SUBRULE(this.orExpression)});orExpression=this.RULE("orExpression",()=>{this.SUBRULE(this.andExpression,{LABEL:"lhs"}),this.MANY(()=>{this.CONSUME(da),this.SUBRULE2(this.andExpression,{LABEL:"rhs"})})});andExpression=this.RULE("andExpression",()=>{this.SUBRULE(this.notExpression,{LABEL:"lhs"}),this.MANY(()=>{this.CONSUME(fa),this.SUBRULE2(this.notExpression,{LABEL:"rhs"})})});notExpression=this.RULE("notExpression",()=>{this.OR([{ALT:()=>{this.CONSUME(pa),this.SUBRULE(this.notExpression,{LABEL:"argument"})}},{ALT:()=>this.SUBRULE(this.atomicExpression)}])});atomicExpression=this.RULE("atomicExpression",()=>{this.OR([{ALT:()=>this.SUBRULE(this.groupExpression)},{ALT:()=>this.SUBRULE(this.callExpression)},{ALT:()=>{this.OR2([{ALT:()=>this.CONSUME(nn)},{ALT:()=>this.CONSUME(ur)},{ALT:()=>this.CONSUME(ir)},{ALT:()=>this.CONSUME(sr)},{ALT:()=>this.CONSUME(ar)}])}},{ALT:()=>this.SUBRULE(this.pathBasedExpression)}])});pathBasedExpression=this.RULE("pathBasedExpression",()=>{this.SUBRULE(this.fieldPath),this.OPTION(()=>{this.OR([{ALT:()=>{this.SUBRULE(this.comparisonOperator),this.SUBRULE(this.literal)}},{ALT:()=>{this.CONSUME(Sa),this.OR2([{ALT:()=>this.SUBRULE2(this.literal)},{ALT:()=>this.SUBRULE(this.valueList)},{ALT:()=>this.SUBRULE(this.comparisonShorthand)}])}}])})});comparisonOperator=this.RULE("comparisonOperator",()=>{this.OR([{ALT:()=>this.CONSUME(Ra,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Ea,{LABEL:"operator"})},{ALT:()=>this.CONSUME(ga,{LABEL:"operator"})},{ALT:()=>this.CONSUME(ma,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Ta,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Aa,{LABEL:"operator"})}])});groupExpression=this.RULE("groupExpression",()=>{this.CONSUME(Jt),this.SUBRULE(this.expression),this.CONSUME(en)});comparisonShorthand=this.RULE("comparisonShorthand",()=>{this.SUBRULE(this.comparisonOperator),this.SUBRULE(this.literal)});valueList=this.RULE("valueList",()=>{this.CONSUME(Jt),this.AT_LEAST_ONE_SEP({SEP:tn,DEF:()=>{this.OR([{ALT:()=>this.SUBRULE(this.literal)},{ALT:()=>this.SUBRULE(this.comparisonShorthand)}])}}),this.CONSUME(en)});callExpression=this.RULE("callExpression",()=>{let t;this.OR([{ALT:()=>{t=Xt,this.CONSUME(Xt,{LABEL:"callee"})}},{ALT:()=>{t=Qt,this.CONSUME(Qt,{LABEL:"callee"})}},{ALT:()=>{t=Zt,this.CONSUME(Zt,{LABEL:"callee"})}},{ALT:()=>{t=or,this.CONSUME(or,{LABEL:"callee"})}},{ALT:()=>{t=cr,this.CONSUME(cr,{LABEL:"callee"})}},{ALT:()=>{t=lr,this.CONSUME(lr,{LABEL:"callee"})}}]),this.CONSUME(Jt),t===Xt||t===Qt||t===Zt?this.SUBRULE(this.callArgumentsText,{LABEL:"args"}):this.SUBRULE(this.callArgumentsQuantifier,{LABEL:"args"}),this.CONSUME(en)});callArgumentsText=this.RULE("callArgumentsText",()=>{this.SUBRULE(this.expression,{LABEL:"arg1"}),this.OPTION(()=>{this.CONSUME(tn),this.SUBRULE2(this.expression,{LABEL:"arg2"})})});callArgumentsQuantifier=this.RULE("callArgumentsQuantifier",()=>{this.SUBRULE(this.expression,{LABEL:"arg1"}),this.CONSUME(tn),this.SUBRULE2(this.expression,{LABEL:"arg2"})});fieldPath=this.RULE("fieldPath",()=>{this.CONSUME(hr),this.MANY(()=>{this.CONSUME(Ia),this.OR2([{ALT:()=>this.CONSUME2(hr)},{ALT:()=>this.CONSUME(nn)}])})});literal=this.RULE("literal",()=>{this.OR([{ALT:()=>this.CONSUME(nn)},{ALT:()=>this.CONSUME(ur)},{ALT:()=>this.CONSUME(ir)},{ALT:()=>this.CONSUME(sr)},{ALT:()=>this.CONSUME(ar)}])})},Np=new ya,yp=Np.getBaseCstVisitorConstructor(),Op=class extends yp{constructor(){super(),this.validateVisitor()}expression(t){return this.visit(t.orExpression)}orExpression(t){let e=this.visit(t.lhs);return t.rhs&&t.rhs.forEach(n=>{const r=this.visit(n);e={type:"LogicalExpression",operator:"OR",left:e,right:r}}),e}andExpression(t){let e=this.visit(t.lhs);return t.rhs&&t.rhs.forEach(n=>{const r=this.visit(n);e={type:"LogicalExpression",operator:"AND",left:e,right:r}}),e}notExpression(t){return t.argument?{type:"UnaryExpression",operator:"NOT",argument:this.visit(t.argument)}:this.visit(t.atomicExpression)}atomicExpression(t){if(t.groupExpression)return this.visit(t.groupExpression[0]);if(t.callExpression)return this.visit(t.callExpression[0]);if(t.pathBasedExpression)return this.visit(t.pathBasedExpression[0]);if(t.StringLiteral)return this.buildLiteralNode(t.StringLiteral[0]);if(t.NumberLiteral)return this.buildLiteralNode(t.NumberLiteral[0]);if(t.True)return this.buildLiteralNode(t.True[0]);if(t.False)return this.buildLiteralNode(t.False[0]);if(t.Null)return this.buildLiteralNode(t.Null[0]);throw new Error("Unsupported atomicExpression alternative")}pathBasedExpression(t){const e=this.visit(t.fieldPath[0]);if(t.comparisonOperator){const n=this.visit(t.comparisonOperator[0]),r=this.visit(t.literal[0]);return{type:"ComparisonExpression",left:e,operator:n,right:r}}if(t.Colon){let n;return t.literal?n=this.visit(t.literal[0]):t.valueList?n=this.visit(t.valueList[0]):n=this.visit(t.comparisonShorthand[0]),{type:"TextShorthandExpression",path:e,value:n}}return e}groupExpression(t){return this.visit(t.expression)}comparisonOperator(t){const e=t.operator?.[0];if(!e)throw console.error("Operator token not found in comparisonOperator context:",JSON.stringify(t,null,2)),new Error("Operator token not found in comparisonOperator");return e.image}comparisonShorthand(t){const e=this.visit(t.comparisonOperator),n=this.visit(t.literal);return{type:"ComparisonShorthand",operator:e,value:n}}valueList(t){const e=[];return(t.literal||[]).forEach(n=>{e.push(this.visit(n))}),(t.comparisonShorthand||[]).forEach(n=>{e.push(this.visit(n))}),{type:"ValueListExpression",values:e}}callExpression(t){const e=t.callee?.[0];if(!e)throw new Error("callExpression: callee token not found. Check parser labels.");const n=e.image,r=[],i=t.args?.[0];if(i){const s=i.children;s.arg1?.[0]&&r.push(this.visit(s.arg1[0])),s.arg2?.[0]&&r.push(this.visit(s.arg2[0]))}return{type:"CallExpression",callee:n,arguments:r}}callArgumentsText(t){const e=[];if(t.arg1?.[0])e.push(this.visit(t.arg1[0]));else throw new Error("callArgumentsText: missing arg1");return t.arg2?.[0]&&e.push(this.visit(t.arg2[0])),e}callArgumentsQuantifier(t){const e=[];if(t.arg1?.[0])e.push(this.visit(t.arg1[0]));else throw new Error("callArgumentsQuantifier: missing arg1");if(t.arg2?.[0])e.push(this.visit(t.arg2[0]));else throw new Error("callArgumentsQuantifier: missing arg2");return e}fieldPath(t){const e=[],n=i=>e.push(i.image),r=i=>e.push(this.unquoteStringToken(i));return(t.Identifier||[]).length>0,(t.StringLiteral||[]).length>0,(t.Identifier||[]).forEach(n),(t.StringLiteral||[]).forEach(r),(t.Identifier2||[]).forEach(n),(t.StringLiteral2||[]).forEach(r),{type:"Path",segments:e}}literal(t){const e=t.StringLiteral?.[0]||t.NumberLiteral?.[0]||t.True?.[0]||t.False?.[0]||t.Null?.[0];if(!e)throw new Error("Literal token not found");return this.buildLiteralNode(e)}buildLiteralNode(t){switch(t.tokenType.name){case"StringLiteral":return{type:"StringLiteral",value:this.unquoteStringToken(t)};case"NumberLiteral":return{type:"NumberLiteral",value:parseFloat(t.image)};case"True":return{type:"BooleanLiteral",value:!0};case"False":return{type:"BooleanLiteral",value:!1};case"Null":return{type:"NullLiteral"};default:throw new Error(`Unknown literal token type: ${t.tokenType.name}`)}}unquoteStringToken(t){return t.image.slice(1,-1).replace(/\\u([0-9a-fA-F]{4})/g,(r,i)=>String.fromCharCode(parseInt(i,16))).replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\v/g,"\v").replace(/\\"/g,'"').replace(/\\\\/g,"\\")}},Lp=new Op,Ur=class extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}},zn=class extends Ur{constructor(t,e,n,r,i="E_PARSE_GENERIC"){super(t),this.line=e,this.column=n,this.snippet=r,this.name="ParseError",this.code=i}code},Fr=class extends Ur{constructor(t,e,n="E_NORMALIZE_GENERIC"){super(t),this.nodeType=e,this.name="NormalizeError",this.code=n}code},_p=class extends Ur{constructor(t,e,n="E_EVAL_GENERIC"){super(t),this.op=e,this.name="EvaluationError",this.code=n}code},vp=new G(Na);function Cp(t){const e=vp.tokenize(t);if(e.errors.length>0){const s=e.errors[0];if(!s)throw new zn("Unknown lexing error",void 0,void 0,void 0,"E_PARSE_GENERIC");const a=(s.message??"Lexing error").split(`
`)[0]??"Lexing error",o=s.line,c=s.column,h=a.toLowerCase().includes("unexpected character")?"E_PARSE_UNEXPECTED_TOKEN":"E_PARSE_GENERIC";throw new zn(a,o,c,void 0,h)}const n=new ya;n.input=e.tokens;const r=n.expression();if(n.errors.length>0){const s=n.errors[0],a=s?.message??"Parse error",o=a.split(`
`)[0]??a,c=s?.token,l=c?.startLine,h=c?.startColumn,u=c?.image,d=o.toLowerCase().includes("unexpected token")?"E_PARSE_UNEXPECTED_TOKEN":"E_PARSE_GENERIC";throw new zn(o,l,h,u,d)}return{ast:Lp.visit(r),tokens:e.tokens}}function xp(t){return t.type==="And"}function Pp(t){return t.type==="Or"}function kp(t){return t.type==="Not"}function bp(t){return t.type==="Comparison"}function Oa(t,e){const n=e?`Unsupported node '${t}': ${e}`:`Unsupported node '${t}'.`;throw new Fr(n,t,"E_NORMALIZE_UNSUPPORTED_NODE")}function wp(t,e){throw new Fr(t,e,"E_NORMALIZE_GENERIC")}var Mp={eq:"neq",neq:"eq",gt:"lte",gte:"lt",lt:"gte",lte:"gt"};function Up(t,e={}){return je(le(t,e))}function je(t,e){switch(t.type){case"Path":return Dp(t);case"StringLiteral":case"NumberLiteral":case"BooleanLiteral":case"NullLiteral":return Bp(t);default:return Ot(t)}}function le(t,e){switch(t.type){case"LogicalExpression":return Fp(t,e);case"UnaryExpression":return $p(t,e);case"ComparisonExpression":return Gp(t);case"TextShorthandExpression":return Wp(t);case"CallExpression":return Kp(t,e);case"Path":return{type:"Path",segments:t.segments};case"StringLiteral":case"NumberLiteral":case"BooleanLiteral":case"NullLiteral":return Rt(t);case"And":case"Or":case"Not":case"Comparison":case"Text":case"Quantified":return t;default:return Oa(t.type??"Unknown")}}function Fp(t,e){const n=je(le(t.left,e)),r=je(le(t.right,e));if(t.operator==="OR")return n.type==="Or"?r.type==="Or"?{type:"Or",children:[...n.children,...r.children]}:{type:"Or",children:[...n.children,r]}:r.type==="Or"?{type:"Or",children:[n,...r.children]}:{type:"Or",children:[n,r].map(Ot)};if(t.operator==="AND")return n.type==="And"?r.type==="And"?{type:"And",children:[...n.children,...r.children]}:{type:"And",children:[...n.children,r]}:r.type==="And"?{type:"And",children:[n,...r.children]}:{type:"And",children:[n,r].map(Ot)};throw new Error("Unknown logical operator: "+t.operator)}function $p(t,e){if(t.operator!=="NOT")throw new Error("Unknown unary operator: "+t.operator);const n=je(le(t.argument,e));if(kp(n))return n.child;if(xp(n))return{type:"Or",children:n.children.map(i=>je(le({type:"UnaryExpression",operator:"NOT",argument:i},e)))};if(Pp(n))return{type:"And",children:n.children.map(i=>je(le({type:"UnaryExpression",operator:"NOT",argument:i},e)))};if(bp(n)){const r=Mp[n.op];return r?{...n,op:r}:{type:"Not",child:n}}if(n.type==="Quantified"){const{quantifier:r,path:i,predicate:s}=n;if(r==="any")return{type:"Quantified",quantifier:"none",path:i,predicate:s};if(r==="all")return{type:"Quantified",quantifier:"any",path:i,predicate:{type:"Not",child:s}};if(r==="none")return{type:"Quantified",quantifier:"any",path:i,predicate:s}}return{type:"Not",child:n}}function Dp(t,e){return{type:"Comparison",path:{type:"Path",segments:t.segments},op:"neq",value:{type:"NullLiteral"}}}function Bp(t,e){switch(t.type){case"BooleanLiteral":t.value;break;case"NumberLiteral":t.value!==0&&Number.isNaN(t.value);break;case"StringLiteral":t.value.length>0;break}throw new Error("normalizeTruthyLiteral: リテラル単体の truthy/falsy 正規化は仕様未定義です")}function Rt(t){switch(t.type){case"StringLiteral":return{type:"StringLiteral",value:t.value};case"NumberLiteral":return{type:"NumberLiteral",value:t.value};case"BooleanLiteral":return{type:"BooleanLiteral",value:t.value};case"NullLiteral":return{type:"NullLiteral"}}}function Gp(t,e){const r={"=":"eq","!=":"neq",">":"gt",">=":"gte","<":"lt","<=":"lte"}[t.operator];if(!r)throw new Error(`Unknown comparison operator: ${t.operator}`);const i={type:"Path",segments:t.left.segments},s=Rt(t.right);return{type:"Comparison",path:i,op:r,value:s}}function Wp(t,e){const n={type:"Path",segments:t.path.segments},r=t.value;if(r.type==="ComparisonShorthand"){const i=r;return{type:"Comparison",path:n,op:{">":"gt",">=":"gte","<":"lt","<=":"lte"}[i.operator],value:Rt(i.value)}}if(r.type==="StringLiteral")return{type:"Text",path:n,op:"contains",value:{type:"StringLiteral",value:r.value}};if(r.type==="NumberLiteral")return{type:"Comparison",path:n,op:"eq",value:Rt(r)};if(r.type==="ValueListExpression"){const i=r.values;if(!i||i.length===0)return wp("empty value list not allowed","ValueListExpression");const s=i.every(o=>o.type==="StringLiteral"),a=i.every(o=>o.type==="ComparisonShorthand");if(!s&&!a)return Oa("ValueListExpression","mixed types");if(s){const o=i.map(c=>Ot({type:"Text",path:n,op:"contains",value:{type:"StringLiteral",value:c.value}}));if(o.length===1){const c=o[0];if(!c)throw new Error("internal error: empty OR children");return c}return{type:"Or",children:o}}if(a){const o=i.map(c=>{const l=c;return Ot({type:"Comparison",path:n,op:{">":"gt",">=":"gte","<":"lt","<=":"lte"}[l.operator],value:Rt(l.value)})});if(o.length===1){const c=o[0];if(!c)throw new Error("internal error: empty AND children");return c}return{type:"And",children:o}}}throw new Error(`Unsupported value type in TextShorthandExpression: ${r.type}`)}function La(t){if(t.type!=="Comparison"&&t.type!=="Text")return t;const e=t.path.segments;if(!Array.isArray(e)||e.length<=1)return t;const n=e[0],r=e.slice(1);if(n===void 0||r.length===0)return t;const i={type:"Path",segments:[n]},s={type:"Path",segments:r};let a;t.type==="Text"?a={type:"Text",path:s,op:t.op,value:t.value}:a={type:"Comparison",path:s,op:t.op,value:t.value};const o=La(a);return{type:"Quantified",quantifier:"any",path:i,predicate:o}}function Ot(t){return t.type==="Text"||t.type==="Comparison"?La(t):t}function Qi(t,e){if(t.type!=="Path")throw new Fr("Unsupported node type for Quantified path: NumberLiteral","NumberLiteral","E_NORMALIZE_UNSUPPORTED_NODE");return t}function Kp(t,e){const{callee:n,arguments:r}=t,i=typeof n=="string"?n.toLowerCase():n;if((a=>a==="contains"||a==="startswith"||a==="endswith")(i)){if(r.length===2){const a=r[0],o=r[1];if(!a||!o)throw new Error(`normalizeCall: ${n} is missing arguments.`);const c=le(a,e),l=le(o,e),h=Qi(c);if(l.type!=="StringLiteral")throw new Error("normalizeCall: text functions require a string literal as the second argument");return{type:"Text",path:h,op:i==="contains"?"contains":i==="startswith"?"startsWith":"endsWith",value:l}}if(r.length===1){const a=r[0];if(!a)throw new Error(`normalizeCall: ${n} is missing argument.`);const o=le(a,e);if(o.type!=="StringLiteral")throw new Error("normalizeCall: text functions require a string literal as the argument");const c=e.textSearchTargets;if(!c||c.length===0)throw new Error("normalizeCall: full-text search targets not configured");const l=i==="contains"?"contains":i==="startswith"?"startsWith":"endsWith",h=f=>typeof f=="string"?{type:"Path",segments:[f]}:f,u=c.map(f=>({type:"Text",path:h(f),op:l,value:o}));if(u.length===0)throw new Error("normalizeCall: full-text search targets not configured");if(u.length===1){const f=u[0];if(!f)throw new Error("internal error: no node for single-target full-text expansion");return f}return{type:"Or",children:u}}throw new Error(`normalizeCall: ${n} expects 1 or 2 arguments, but got ${r.length}.`)}if(i==="any"||i==="all"||i==="none"){if(r.length!==2)throw new Error(`normalizeCall: ${i} expects 2 arguments: (path, predicateExpr)`);const a=r[0],o=r[1];if(!a||!o)throw new Error(`normalizeCall: ${n} is missing arguments.`);const c=le(a,e),l=le(o,e),h=Qi(c),u=je(l);return{type:"Quantified",quantifier:i==="any"?"any":i==="all"?"all":"none",path:h,predicate:u}}throw new Error(`normalizeCall: unsupported function: ${i}`)}function zp(t,e,n){const r=`Type mismatch for '${t}': expected ${e}, got ${n}.`;throw new _p(r,t,"E_EVAL_TYPE_MISMATCH")}function jp(t,e={}){const n={ignoreCase:e.ignoreCase??!1,locale:e.locale??void 0,foldDiacritics:e.foldDiacritics??!1};return function(i){return Mt(t,i,n)}}function Zi(t,e){let n=t;return e.foldDiacritics&&(n=n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),e.ignoreCase&&(n=n.toLocaleLowerCase(e.locale)),n}function Mt(t,e,n){switch(t.type){case"And":return Hp(t,e,n);case"Or":return Vp(t,e,n);case"Not":return qp(t,e,n);case"Comparison":return Yp(t,e);case"Text":return Xp(t,e,n);case"Quantified":return Qp(t,e,n);default:throw new Error("Unsupported CIR node type in evaluator: "+t.type)}}function Hp(t,e,n){for(const r of t.children)if(!Mt(r,e,n))return!1;return!0}function Vp(t,e,n){for(const r of t.children)if(Mt(r,e,n))return!0;return!1}function qp(t,e,n){return!Mt(t.child,e,n)}function Yp(t,e){const n=$r(e,t.path),r=Zp(t.value);switch(t.op){case"eq":return Ji(n,r);case"neq":return!Ji(n,r);case"gt":return Kt("gt",n,r,(i,s)=>i>s);case"gte":return Kt("gte",n,r,(i,s)=>i>=s);case"lt":return Kt("lt",n,r,(i,s)=>i<s);case"lte":return Kt("lte",n,r,(i,s)=>i<=s);default:throw new Error("Unknown comparison op: "+t.op)}}function Xp(t,e,n){const r=$r(e,t.path),i=t.value.value;if(typeof r!="string")return!1;const s=Zi(r,n),a=Zi(i,n);if(t.op==="contains")return s.includes(a);if(t.op==="startsWith")return s.startsWith(a);if(t.op==="endsWith")return s.endsWith(a);throw new Error("Unknown text op: "+t.op)}function Qp(t,e,n){const r=$r(e,t.path),i=Array.isArray(r)?r:r==null?[]:[r],s=a=>Mt(t.predicate,a,n);if(t.quantifier==="any")return i.some(s);if(t.quantifier==="all")return i.length>0&&i.every(s);if(t.quantifier==="none")return!i.some(s);throw new Error("Unknown quantifier: "+t.quantifier)}function $r(t,e){const n=e.segments;if(n.length>0&&n[0]==="value"){if(n.length===1)return t;let i=t;for(let s=1;s<n.length;s++){if(i==null)return;i=i[n[s]]}return i}let r=t;for(const i of n){if(r==null)return;r=r[i]}return r}function Zp(t){switch(t.type){case"StringLiteral":return t.value;case"NumberLiteral":return t.value;case"BooleanLiteral":return t.value;case"NullLiteral":return null;default:throw new Error("Unknown literal type: "+t.type)}}function Ji(t,e){return t===null&&e===null?!0:Number.isNaN(t)||Number.isNaN(e)?!1:t===e}function Kt(t,e,n,r){if(e==null)return!1;const i=typeof e,s=typeof n;return!(i==="number"&&s==="number")&&!(i==="string"&&s==="string")&&zp(t,"number|string",`${i}/${s}`),r(e,n)}const _a=t=>typeof t=="object"&&t!==null&&!Array.isArray(t);function Jp(t,e=300,n=8){const r=new Map,i=(u,f)=>{u.samples.length<n&&u.samples.push(f),JSON.stringify(f);const d=new Set(u.samples.map(g=>JSON.stringify(g)));u.uniqueApprox=d.size},s=(u,f)=>{u.types[f]=(u.types[f]??0)+1},a=u=>(r.has(u)||r.set(u,{path:u,types:{},samples:[],uniqueApprox:0,children:void 0}),r.get(u)),o=(u,f)=>{const d=u||"$",g=a(d),R=Array.isArray(f)?"array":f===null?"null":typeof f;if(s(g,R),i(g,c(f)),Array.isArray(f))for(const y of f)o(`${d}[]`,y);else if(_a(f))for(const[y,E]of Object.entries(f))o(d==="$"?y:`${d}.${y}`,E)};function c(u){return typeof u=="string"&&u.length>80?u.slice(0,77)+"…":u}const l=t.slice(0,e);for(const u of l)o("",u);return{flat:[...r.values()].sort((u,f)=>u.path.localeCompare(f.path)),byPath:r}}function eg(t){const e=[],n=s=>(t.types[s]??0)>0,r=t.path.replace(/\[\]/g,"");if(t.path.endsWith("[]")){const s=r;let a="value",o='"some_value"';const c=t.samples[0];if(_a(c)){a=Object.keys(c)[0]??"key";const h=c[a];typeof h=="string"?o=`"${String(h).replace(/"/g,'\\"')}"`:(typeof h=="number"||typeof h=="boolean")&&(o=String(h))}else typeof c=="string"&&(o=`"${String(c).replace(/"/g,'\\"')}"`);const l=`${a} = ${o}`;return e.push({label:`any(${s}, ...)`,query:`any(${s}, ${l})`,rationale:"配列に条件に合う要素が1つでも存在するか。"}),e.push({label:`all(${s}, ...)`,query:`all(${s}, ${l})`,rationale:"配列の全要素が条件に合うか。"}),e}if(n("string")){const s=String(t.samples.find(a=>typeof a=="string")??"text").replace(/"/g,'\\"');e.push({label:`${r}:"..."`,query:`${r}:"${s.split(/\s+/)[0]||s}"`,rationale:"テキスト検索（部分一致）"})}if(n("number")){const s=Number(t.samples.find(a=>typeof a=="number"));Number.isFinite(s)&&e.push({label:`${r} >=`,query:`${r} >= ${Math.floor(s)}`,rationale:"数値比較"})}return n("boolean")&&e.push({label:`${r} = true`,query:`${r} = true`,rationale:"真偽値での絞り込み"}),e}function tg(t,e=12){const n=t.flat.filter(o=>o.path!=="$"&&!o.path.endsWith("[]")).map(o=>({ps:o,score:ng(o)})).sort((o,c)=>c.score-o.score),r=[];for(const{ps:o}of n)if(r.push(...eg(o)),r.length>=e)break;const i=n.find(o=>es(o.ps)==="string"),s=n.find(o=>es(o.ps)==="number");if(s){const o=s.ps.path.replace(/\[\]/g,""),c=Number(s.ps.samples.find(l=>typeof l=="number"))||10;r.push({label:"NOT (...)",query:`NOT (${o} > ${c})`,rationale:"条件を否定するNOT演算子の使用例。"})}if(i&&s){const o=i.ps.path.replace(/\[\]/g,""),c=String(i.ps.samples.find(u=>typeof u=="string")??"example").replace(/"/g,'\\"'),l=s.ps.path.replace(/\[\]/g,""),h=Number(s.ps.samples.find(u=>typeof u=="number"))||15;r.push({label:"... OR ...",query:`${o}:"${c}" OR ${l} < ${h}`,rationale:"複数の条件のいずれかを満たすOR演算子の使用例。"})}const a=new Map;for(const o of r)a.has(o.query)||a.set(o.query,o);return Array.from(a.values()).slice(0,e)}function es(t){const e=Object.entries(t.types);return e.length?(e.sort((n,r)=>r[1]-n[1]),e[0][0]):"unknown"}function ng(t){const e=t.types;return(e.string??0)*3+(e.number??0)*2+(e.boolean??0)*2}const ue={rows:[],error:null},$=t=>document.getElementById(t),Dr=$("queryInput"),bn=$("jsonInput");$("cirOutput");$("suggestions");$("error");$("stats");$("results");$("runBtn");$("loadSampleBtn");$("dropzone");function va(){ue.error=null;const t=Dr.value;try{const{ast:e}=Cp(t),n=Up(e);$("cirOutput").textContent=JSON.stringify(n,null,2);const r=jp(n,{ignoreCase:!0,foldDiacritics:!0}),i=ue.rows.filter(r);sg(i),location.hash=encodeURIComponent(t)}catch(e){ue.error=e.message,console.error("Execution error:",e)}Gr()}function Br(){try{const t=bn.value;if(!t.trim())ue.rows=[];else{const e=JSON.parse(t);if(!Array.isArray(e))throw new Error("Data must be a JSON array.");ue.rows=e}ue.error=null}catch(t){ue.error=t.message}ig()}function rg(t){t.preventDefault();const e=t.dataTransfer?.files?.[0];if(!e)return;const n=new FileReader;n.onload=()=>{bn.value=String(n.result??""),Br()},n.onerror=()=>{ue.error="Failed to read file.",Gr()},n.readAsText(e)}function ig(){ag(),Gr(),$("stats").textContent=`Loaded: ${ue.rows.length} items`}function Gr(){$("error").textContent=ue.error??""}function sg(t){const e=document.getElementById("results");if(e.innerHTML="",!t.length){e.textContent="No results found.";return}const n=[...new Set(t.flatMap(o=>Object.keys(o)))],r=document.createElement("table"),i=document.createElement("thead"),s=document.createElement("tr");for(const o of n){const c=document.createElement("th");c.textContent=o,s.appendChild(c)}i.appendChild(s),r.appendChild(i);const a=document.createElement("tbody");for(const o of t){const c=document.createElement("tr");for(const l of n){const h=document.createElement("td"),u=o[l];u==null?h.textContent="":typeof u=="object"?h.textContent=JSON.stringify(u,null,2):h.textContent=String(u),c.appendChild(h)}a.appendChild(c)}r.appendChild(a),e.appendChild(r)}function ag(){const t=$("suggestions");t.innerHTML="";const e=Jp(ue.rows);tg(e).forEach(r=>{const i=document.createElement("button");i.textContent=r.label,i.title=r.query,i.onclick=()=>{Dr.value=r.query,va()},t.appendChild(i)})}async function ts(){const e=await(await fetch("./cocktails.json")).json();bn.value=JSON.stringify(e,null,2),Br()}function og(){$("runBtn").addEventListener("click",va),$("loadSampleBtn").addEventListener("click",ts),bn.addEventListener("input",Br);const t=$("dropzone");t.addEventListener("dragover",e=>e.preventDefault()),t.addEventListener("drop",rg),location.hash&&(Dr.value=decodeURIComponent(location.hash.slice(1))),ts()}document.addEventListener("DOMContentLoaded",og)});export default cg();
